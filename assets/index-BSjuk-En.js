import{j as e}from"./animation-Dic0VY_j.js";import{r as s,L as t}from"./vendor-B42Fopx7.js";import{n as a,a as r,f as l}from"./googleSheetService-cfWdSa8H.js";import{u as i,w as d}from"./xlsx-C5xT2hrF.js";import{R as n,L as o,C as c,X as x,Y as m,T as h,a as g,b as p}from"./charts-4WWmhui6.js";import{D as b}from"./download-B7-s3mmV.js";import{c as u}from"./index-nvTOtYcA.js";import{S as y}from"./smartphone-CdZfPprM.js";import{C as j}from"./calendar-CXo4SSaH.js";import{C as f}from"./clock-DY30Qxvu.js";import{T as N}from"./trending-up-B5aRplPj.js";import{A as v}from"./arrow-left-DRtibyGX.js";import{R as w}from"./refresh-cw-CDcaT94g.js";import{F as S}from"./filter-HLpy3aI1.js";import{X as k}from"./x-Bk2wiqtD.js";import"./supabase-BnJ3Hf6T.js";
/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=u("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),_=({visits:t,leads:a})=>{const r=e=>{if(!e||"string"!=typeof e)return 0;const s=new Date(e).getTime();if(!isNaN(s))return s;try{const s=e.includes("ì˜¤í›„")||e.toLowerCase().includes("pm"),t=e.includes("ì˜¤ì „")||e.toLowerCase().includes("am"),a=e.match(/\d+/g);if(!a||a.length<3)return 0;let r=parseInt(a[0],10),l=parseInt(a[1],10)-1,i=parseInt(a[2],10),d=0;return a.length>=4&&(d=parseInt(a[3],10)),s&&d<12&&(d+=12),t&&12===d&&(d=0),new Date(r,l,i,d).getTime()}catch(t){return 0}},l=e=>{const s=e.getHours();return s>=9&&s<=17?"day":"night"},u=s.useMemo(()=>{const e=new Map;return t.forEach(s=>{const t=r(s.Timestamp);if(!t)return;const a=new Date(t),i=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,d=l(a),n="PC"===s.Device;e.has(i)||e.set(i,{date:i,visits:{day:{total:0,pc:0,mobile:0},night:{total:0,pc:0,mobile:0},sum:{total:0,pc:0,mobile:0}},leads:{day:{total:0,pc:0,mobile:0},night:{total:0,pc:0,mobile:0},sum:{total:0,pc:0,mobile:0}}});const o=e.get(i);o.visits[d].total++,n?o.visits[d].pc++:o.visits[d].mobile++,o.visits.sum.total++,n?o.visits.sum.pc++:o.visits.sum.mobile++}),a.forEach(s=>{const t=r(s.timestamp||s.Timestamp);if(!t)return;const a=new Date(t),i=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,d=l(a),n=!s.user_agent||!/mobile/i.test(s.user_agent);e.has(i)||e.set(i,{date:i,visits:{day:{total:0,pc:0,mobile:0},night:{total:0,pc:0,mobile:0},sum:{total:0,pc:0,mobile:0}},leads:{day:{total:0,pc:0,mobile:0},night:{total:0,pc:0,mobile:0},sum:{total:0,pc:0,mobile:0}}});const o=e.get(i);o.leads[d].total++,n?o.leads[d].pc++:o.leads[d].mobile++,o.leads.sum.total++,n?o.leads.sum.pc++:o.leads.sum.mobile++}),Array.from(e.values()).sort((e,s)=>s.date.localeCompare(e.date))},[t,a]),y=s.useMemo(()=>[...u].slice(0,10).reverse().map(e=>({date:e.date.slice(5).replace("-","."),visits:e.visits.sum.total,pc:e.visits.sum.pc,mobile:e.visits.sum.mobile,leads:e.leads.sum.total})),[u]),j=s=>e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"font-bold text-gray-800",children:s.total}),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",s.pc,"/",s.mobile,")"]})]});return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ì¼ë³„ í†µê³„"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ëžœë”©ì„ ì ‘ì†í•œ ê¸°ë¡ê³¼ ì‹ ì²­í•œ ë°ì´í„°ë¥¼ ë‚ ì§œë³„ë¡œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]}),e.jsx("div",{className:"text-sm font-bold text-gray-700",children:"ê²€ìƒ‰ì¼ ê¸°ì¤€ ìµœê·¼ 10ì¼ê°„ ê·¸ëž˜í”„"})]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(n,{width:"100%",height:"100%",children:e.jsxs(o,{data:y,children:[e.jsx(c,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(x,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},dy:10}),e.jsx(m,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),e.jsx(h,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(g,{iconType:"circle"}),e.jsx(p,{type:"monotone",dataKey:"pc",name:"ìœ ìž…(PC)",stroke:"#22c55e",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(p,{type:"monotone",dataKey:"mobile",name:"ìœ ìž…(ëª¨ë°”ì¼)",stroke:"#ec4899",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(p,{type:"monotone",dataKey:"visits",name:"ìœ ìž…(ì „ì²´)",stroke:"#6366f1",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(p,{type:"monotone",dataKey:"leads",name:"ì ‘ìˆ˜(ì „ì²´)",stroke:"#3b82f6",strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-4 items-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"ì£¼ì•¼ê¸°ì¤€ : ì£¼ê°„(09~17ì‹œ) ì™¸ ì•¼ê°„"}),e.jsxs("button",{onClick:()=>{const e=i.json_to_sheet(u.map(e=>({"ë‚ ì§œ":e.date,"ë°©ë¬¸_ì „ì²´":e.visits.sum.total,"ë°©ë¬¸_PC":e.visits.sum.pc,"ë°©ë¬¸_ëª¨ë°”ì¼":e.visits.sum.mobile,"ë°©ë¬¸_ì£¼ê°„":e.visits.day.total,"ë°©ë¬¸_ì•¼ê°„":e.visits.night.total,"ì ‘ìˆ˜_ì „ì²´":e.leads.sum.total,"ì ‘ìˆ˜_PC":e.leads.sum.pc,"ì ‘ìˆ˜_ëª¨ë°”ì¼":e.leads.sum.mobile}))),s=i.book_new();i.book_append_sheet(s,e,"ì¼ë³„í†µê³„"),d(s,"landing_factory_daily_stats.xlsx")},className:"flex items-center px-3 py-1.5 bg-gray-900 text-white text-xs rounded hover:bg-gray-800 transition-colors",children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-white border-b text-center text-xs text-gray-500",children:[e.jsx("th",{rowSpan:2,className:"px-4 py-3 font-medium bg-gray-50 w-32 border-r",children:"ë‚ ì§œ"}),e.jsx("th",{colSpan:3,className:"px-4 py-2 font-medium border-r border-b",children:"ìœ ìž… (PC/Mobile)"}),e.jsx("th",{colSpan:3,className:"px-4 py-2 font-medium border-b",children:"ì ‘ìˆ˜ (PC/Mobile)"}),e.jsx("th",{rowSpan:2,className:"px-4 py-3 font-medium bg-gray-50 border-l w-24",children:"ì ‘ìˆ˜ìœ¨"})]}),e.jsxs("tr",{className:"bg-gray-50 text-center text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì£¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì•¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32 bg-gray-100",children:"í•©ê³„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì£¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì•¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32 bg-gray-100",children:"í•©ê³„"})]})]}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:0===u.length?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-400",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})}):u.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-center font-medium text-gray-800 bg-gray-50 border-r text-xs",children:s.date}),e.jsx("td",{className:"px-4 py-3 border-r",children:j(s.visits.day)}),e.jsx("td",{className:"px-4 py-3 border-r",children:j(s.visits.night)}),e.jsx("td",{className:"px-4 py-3 border-r bg-gray-50/50",children:j(s.visits.sum)}),e.jsx("td",{className:"px-4 py-3 border-r",children:j(s.leads.day)}),e.jsx("td",{className:"px-4 py-3 border-r",children:j(s.leads.night)}),e.jsx("td",{className:"px-4 py-3 bg-gray-50/50",children:j(s.leads.sum)}),e.jsx("td",{className:"px-4 py-3 text-center border-l font-bold text-blue-600 bg-gray-50",children:s.visits.sum.total>0?(s.leads.sum.total/s.visits.sum.total*100).toFixed(1)+"%":"0%"})]},s.date))})]})})]})]})},C=({visits:t,leads:a})=>{const r=t.length,l=a.length,i=r>0?(l/r*100).toFixed(1):"0",d=(e,s)=>s>0?(e/s*100).toFixed(0)+"%":"0%",n=s.useMemo(()=>{const e=t.filter(e=>"PC"===e.Device).length,s=t.filter(e=>"PC"!==e.Device).length;return[{label:"PC",count:e,percent:d(e,r)},{label:"ëª¨ë°”ì¼",count:s,percent:d(s,r)}]},[t]),o=s.useMemo(()=>{const e=[0,0,0,0,0,0,0];t.forEach(s=>{const t=new Date(s.Timestamp);isNaN(t.getTime())||e[t.getDay()]++});const s=["ì¼ìš”ì¼","ì›”ìš”ì¼","í™”ìš”ì¼","ìˆ˜ìš”ì¼","ëª©ìš”ì¼","ê¸ˆìš”ì¼","í† ìš”ì¼"];return[1,2,3,4,5,6,0].map(t=>({label:s[t],count:e[t],percent:d(e[t],r)}))},[t]),c=s.useMemo(()=>{const e=new Array(24).fill(0);return t.forEach(s=>{const t=new Date(s.Timestamp);isNaN(t.getTime())||e[t.getHours()]++}),e.map((e,s)=>({label:`${s}ì‹œ`,count:e,percent:d(e,r)}))},[t]);return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ìƒì„¸ í˜„í™©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ëžœë”© ìœ ìž…ê³¼ ì ‘ìˆ˜ í˜„í™©ì„ í•­ëª©ë³„ë¡œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 bg-white p-6 rounded-xl border border-gray-200 shadow-sm text-center",children:[e.jsx($,{label:"ìœ ìž…ìˆ˜",value:`${r}ê±´`,color:"text-gray-900"}),e.jsx($,{label:"í‰ê·  ì²´ë¥˜ ì‹œê°„",value:"-",color:"text-gray-400",sub:"(ì§‘ê³„ì¤‘)"}),e.jsx($,{label:"ì²´ë¥˜ ì‹œê°„ì´ ì—†ëŠ” ìœ ìž…",value:"-",color:"text-gray-400",sub:"(0%)"}),e.jsx($,{label:"ì ‘ìˆ˜",value:`${l}ê±´`,color:"text-blue-600"}),e.jsx($,{label:"ì ‘ìˆ˜ìœ¨",value:`${i}%`,color:"text-blue-600"}),e.jsx($,{label:"í‰ê·  ì ‘ìˆ˜ ì‹œê°„",value:"-",color:"text-gray-400",sub:"(ì§‘ê³„ì¤‘)"})]}),e.jsxs("h4",{className:"text-lg font-bold flex items-center gap-2 mt-8 mb-4",children:[e.jsx(D,{className:"w-5 h-5"})," í•­ëª©ë³„ ì§‘ê³„ í˜„í™©"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(M,{title:"ìœ ìž…ê¸°ê¸°ë³„",icon:e.jsx(y,{className:"w-4 h-4"}),headers:["í•­ëª©","ìœ ìž…","ë¹„ìœ¨"],rows:n}),e.jsx(M,{title:"ìš”ì¼ë³„",icon:e.jsx(j,{className:"w-4 h-4"}),headers:["í•­ëª©","ìœ ìž…","ë¹„ìœ¨"],rows:o}),e.jsx(M,{title:"ì‹œê°„ëŒ€ë³„",icon:e.jsx(f,{className:"w-4 h-4"}),headers:["í•­ëª©","ìœ ìž…","ë¹„ìœ¨"],rows:c})]})]})},$=({label:s,value:t,color:a,sub:r})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-2 border-r last:border-r-0 border-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 mb-2",children:s}),e.jsx("span",{className:`text-2xl font-bold ${a}`,children:t}),r&&e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:r})]}),M=({title:s,icon:t,headers:a,rows:r})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 bg-gray-50 flex items-center gap-2 font-bold text-sm text-gray-700",children:[t," ",s]}),e.jsx("div",{className:"overflow-x-auto max-h-[300px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-xs text-center",children:[e.jsx("thead",{className:"text-gray-500 bg-gray-50 border-b",children:e.jsx("tr",{children:a.map(s=>e.jsx("th",{className:"py-2",children:s},s))})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 text-gray-600",children:s.label}),e.jsxs("td",{className:"py-2 text-gray-800 font-medium",children:[s.count,"ê±´"]}),e.jsx("td",{className:"py-2 text-gray-500",children:s.percent})]},s.label))})]})})]}),L=({visits:t,leads:a})=>{const r=s.useMemo(()=>{const e={};return t.forEach(s=>{const t=s.utm_source||"(direct)",a=s.utm_medium||"-",r=s.utm_campaign||"-",l=s.utm_term||"-",i=s.utm_content||"-",d=`${t}|${a}|${r}|${l}|${i}`;e[d]||(e[d]={id:d,source:t,medium:a,campaign:r,term:l,content:i,visits:0,leads:0}),e[d].visits++}),a.forEach(s=>{const t=s.utm_source||"(direct)",a=s.utm_medium||"-",r=s.utm_campaign||"-",l=s.utm_term||"-",i=s.utm_content||"-",d=`${t}|${a}|${r}|${l}|${i}`;e[d]||(e[d]={id:d,source:t,medium:a,campaign:r,term:l,content:i,visits:0,leads:0}),e[d].leads++}),Object.values(e).sort((e,s)=>s.leads-e.leads||s.visits-e.visits)},[t,a]),l=t.length;return a.length,e.jsxs("div",{className:"animate-fade-in space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-gray-500 text-xs font-bold mb-1",children:"UTM ì¶”ì  ë°©ë¬¸"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((e,s)=>"(direct)"!==s.source?e+s.visits:e,0).toLocaleString(),e.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["/ ",l.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-gray-500 text-xs font-bold mb-1",children:"ë§ˆì¼€íŒ… ì „í™˜ (Leads)"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[r.reduce((e,s)=>"(direct)"!==s.source?e+s.leads:e,0).toLocaleString(),e.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"ê±´"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-gray-500"}),"ìº íŽ˜ì¸ ìƒì„¸ ë¶„ì„"]}),e.jsx("div",{className:"text-xs text-gray-400",children:"ì „í™˜ìˆ˜(DB) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Source (ì¶œì²˜)"}),e.jsx("th",{className:"px-6 py-3",children:"Medium (ë§¤ì²´)"}),e.jsx("th",{className:"px-6 py-3",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-right text-gray-400",children:"ë°©ë¬¸ìˆ˜"}),e.jsx("th",{className:"px-6 py-3 text-right font-bold text-blue-600",children:"ì „í™˜ìˆ˜(DB)"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"ì „í™˜ìœ¨"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:0===r.length?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. (ê¸°ê°„ì„ ì¡°ì •í•˜ê±°ë‚˜ UTM ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”)"})}):r.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-3 font-medium text-gray-900",children:"(direct)"===s.source?e.jsx("span",{className:"text-gray-400 font-normal italic",children:"(ì§ì ‘ ìœ ìž…)"}):e.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded text-xs border border-blue-100",children:s.source})}),e.jsx("td",{className:"px-6 py-3 text-gray-600",children:s.medium}),e.jsxs("td",{className:"px-6 py-3 text-gray-600",children:["-"!==s.campaign&&e.jsx("div",{className:"font-medium",children:s.campaign}),"-"!==s.term&&e.jsxs("div",{className:"text-xs text-gray-400",children:["Term: ",s.term]})]}),e.jsx("td",{className:"px-6 py-3 text-right",children:s.visits.toLocaleString()}),e.jsx("td",{className:"px-6 py-3 text-right font-bold text-blue-600",children:s.leads.toLocaleString()}),e.jsxs("td",{className:"px-6 py-3 text-right text-gray-600",children:[s.visits>0?(s.leads/s.visits*100).toFixed(1):"0","%"]})]},t))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 text-xs text-blue-700",children:[e.jsx("strong",{children:"ðŸ’¡ íŒ:"})," UTM íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ëœ ë§í¬ë¡œ ìœ ìž…ëœ ê²½ìš°ì—ë§Œ ì´ê³³ì— ì§‘ê³„ë©ë‹ˆë‹¤. (ì˜ˆ: ",e.jsx("code",{className:"bg-white px-1 py-0.5 rounded border",children:"?utm_source=instagram&utm_medium=sns"}),")"]})]})},T=()=>{const[i,d]=s.useState([]),[n,o]=s.useState([]),[c,x]=s.useState([]),[m,h]=s.useState(!0),[g,p]=s.useState("all"),[b,u]=s.useState(null),[y,f]=s.useState(!1),[N,D]=s.useState(new Date),[$,M]=s.useState("daily"),T=async()=>{h(!0);try{const[e,s,t]=await Promise.all([a(),r(),l()]);d(e||[]),o(s||[]),x(t||[])}catch(e){}finally{h(!1)}};s.useEffect(()=>{T()},[]);const F=e=>{const s=c.find(s=>String(s.id)===String(e));return s?s.title:`(ID: ${e})`},P=s.useMemo(()=>{const e=new Set(i.map(e=>e["Landing ID"]));return Array.from(e).sort().map(e=>({id:String(e),title:F(String(e))}))},[i,c]),I=s.useMemo(()=>{let e=i,s=n;return"all"!==g&&(e=e.filter(e=>String(e["Landing ID"])===g),s=s.filter(e=>String(e["Landing ID"])===g)),{visits:e,leads:s}},[i,n,g,b]);return e.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-4 md:py-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(t,{to:"/admin",className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(v,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("h1",{className:"text-base md:text-xl font-bold truncate max-w-[180px] md:max-w-none",children:["ì ‘ì† í†µê³„ ",b&&e.jsxs("span",{className:"text-blue-600 hidden md:inline",children:["(",b,")"]})]})]}),e.jsxs("button",{onClick:T,className:"flex items-center px-3 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 text-xs md:text-sm font-bold",children:[e.jsx(w,{className:"w-4 h-4 mr-1 md:mr-2 "+(m?"animate-spin":"")}),e.jsx("span",{className:"hidden sm:inline",children:"ìƒˆë¡œê³ ì¹¨"})]})]}),e.jsxs("main",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 md:p-4 mb-4 md:mb-6 shadow-sm relative",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap md:items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs md:text-sm font-bold text-gray-700",children:"í•„í„°:"})]}),e.jsxs("select",{value:g,onChange:e=>p(e.target.value),className:"w-full md:w-auto border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsx("option",{value:"all",children:"ì „ì²´ ëžœë”©íŽ˜ì´ì§€"}),P.map(s=>e.jsxs("option",{value:s.id,children:[s.title," (",s.id,")"]},s.id))]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>f(!y),className:"w-full md:w-auto flex items-center justify-center gap-2 px-3 py-2 border rounded-lg text-sm "+(b?"bg-blue-50 border-blue-200 text-blue-700 font-bold":"border-gray-300 text-gray-700"),children:[e.jsx(j,{className:"w-4 h-4"}),b||"ë‚ ì§œ ì„ íƒ",b&&e.jsx(k,{className:"w-3 h-3 hover:text-red-500",onClick:e=>{e.stopPropagation(),u(null)}})]}),y&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl p-4 z-50 w-64",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>D(new Date(N.getFullYear(),N.getMonth()-1,1)),className:"p-1 hover:bg-gray-100 rounded",children:"<"}),e.jsxs("span",{className:"text-sm font-bold",children:[N.getFullYear(),"ë…„ ",N.getMonth()+1,"ì›”"]}),e.jsx("button",{onClick:()=>D(new Date(N.getFullYear(),N.getMonth()+1,1)),className:"p-1 hover:bg-gray-100 rounded",children:">"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const s=N.getFullYear(),t=N.getMonth(),a=((e,s)=>new Date(e,s+1,0).getDate())(s,t),r=((e,s)=>new Date(e,s,1).getDay())(s,t),l=[];for(let i=0;i<r;i++)l.push(e.jsx("div",{className:"h-8 w-8"},`empty-${i}`));for(let i=1;i<=a;i++){const a=`${s}-${String(t+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,r=b===a;l.push(e.jsx("button",{onClick:()=>{u(r?null:a),f(!1)},className:"h-8 w-8 rounded-full text-xs font-bold flex items-center justify-center relative "+(r?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"),children:i},i))}return l})()})]})]})]})}),e.jsxs("div",{className:"flex gap-4 md:gap-8 border-b border-gray-200 mb-6 md:mb-8 px-1 md:px-2 overflow-x-auto",children:[e.jsx("button",{onClick:()=>M("daily"),className:"pb-3 text-xs md:text-sm font-bold transition-colors border-b-2 whitespace-nowrap "+("daily"===$?"text-blue-600 border-blue-600":"text-gray-400 border-transparent hover:text-gray-700"),children:"ì¼ë³„ í˜„í™©"}),e.jsx("button",{onClick:()=>M("detail"),className:"pb-3 text-xs md:text-sm font-bold transition-colors border-b-2 whitespace-nowrap "+("detail"===$?"text-blue-600 border-blue-600":"text-gray-400 border-transparent hover:text-gray-700"),children:"ìƒì„¸ í˜„í™©"}),e.jsx("button",{onClick:()=>M("marketing"),className:"pb-3 text-xs md:text-sm font-bold transition-colors border-b-2 whitespace-nowrap "+("marketing"===$?"text-blue-600 border-blue-600":"text-gray-400 border-transparent hover:text-gray-700"),children:"ë§ˆì¼€íŒ… (UTM)"})]}),e.jsxs("div",{className:"min-h-[500px]",children:["daily"===$&&e.jsx(_,{visits:I.visits,leads:I.leads}),"detail"===$&&e.jsx(C,{visits:I.visits,leads:I.leads}),"marketing"===$&&e.jsx(L,{visits:I.visits,leads:I.leads})]})]})]})};export{T as default};
