import{j as e,m as G,A as se}from"./animation-BOIIKJnC.js";import{r as T,R as ae}from"./vendor-B_BVtOF2.js";import{V as je,W as re,Z as ke,e as Ne,$ as fe}from"./index-BEjpOW8Y.js";const ie=({fields:a,formData:R,onChange:W,errors:o,formStyle:i,primaryColor:I="#3b82f6",fieldOverrides:b={}})=>{const P=(i==null?void 0:i.containerLayout)||"standard",c=(i==null?void 0:i.containerGap)||(P==="inline"?"0.5rem":P==="compact"?"0.75rem":"1.5rem"),m=["w-full overflow-y-auto",P==="inline"?"flex flex-wrap items-end":"space-y-4"].filter(Boolean).join(" ");return e.jsx("div",{className:m,style:{backgroundColor:i==null?void 0:i.containerBgColor,opacity:i!=null&&i.containerBgOpacity?i.containerBgOpacity/100:1,maxHeight:i==null?void 0:i.containerMaxHeight,borderColor:i==null?void 0:i.containerBorderColor,borderRadius:i==null?void 0:i.containerBorderRadius,padding:i==null?void 0:i.containerPadding,gap:c},children:a.map(g=>{const t=b[g.id],O={...g,label:(t==null?void 0:t.label)??g.label,type:(t==null?void 0:t.type)??g.type,required:(t==null?void 0:t.required)??g.required,placeholder:(t==null?void 0:t.placeholder)??g.placeholder,options:(t==null?void 0:t.options)??g.options};return e.jsx(je,{field:O,value:R[O.id],onChange:H=>W(O.id,H),error:o[O.id],formStyle:i,primaryColor:I,layout:P},O.id)})})},be=({heroConfig:a,onStart:R,primaryColor:W,buttonStyle:o,backgroundContent:i,insertedContent:I,hideTitle:b,backgroundColor:P,backgroundImage:c,backgroundOverlay:m,maxWidth:g,titleStyle:t,subtitleStyle:O,formData:H={},onDataChange:Y=()=>{},embeddedFields:B=[],formStyle:w,mediaStyles:v,hideMobileBackground:z=!1,fieldOverrides:n,questionContainerStyle:s})=>{const[Z,D]=T.useState({}),[u,A]=T.useState(!1);ae.useEffect(()=>{const d=()=>A(window.innerWidth<768);return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const V=()=>{const d={};return B.forEach(L=>{L.required&&!H[L.id]&&(d[L.id]="필수 항목을 입력해주세요.")}),D(d),Object.keys(d).length===0},r=()=>{V()&&R(H)},j=P||c,M=(m??60)/100,l=((d,L,J="to right")=>{if(!d||!L)return{};const k=J.replace("to-","to ").replace("-"," ");return{backgroundImage:`linear-gradient(${k.includes("to")?k:"to right"}, ${d}, ${L})`}})(o==null?void 0:o.gradientFrom,o==null?void 0:o.gradientTo,o==null?void 0:o.gradientDirection),N={backgroundColor:(o==null?void 0:o.backgroundColor)||W,color:(o==null?void 0:o.textColor)||"#ffffff",fontSize:o==null?void 0:o.fontSize,borderRadius:o==null?void 0:o.borderRadius,fontFamily:o==null?void 0:o.fontFamily,fontWeight:o==null?void 0:o.fontWeight,...l},_=t!=null&&t.gradientFrom&&(t!=null&&t.gradientTo)?{backgroundImage:`linear-gradient(to right, ${t.gradientFrom}, ${t.gradientTo})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"}:{};return e.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden text-white flex flex-col justify-center items-center px-6 text-center",style:{backgroundColor:P||void 0,backgroundImage:c?`url(${c})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[j&&(!u||!z)&&e.jsx("div",{className:"absolute inset-0 bg-black z-0",style:{opacity:M}}),!j&&i&&(!u||!z)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:i.type==="image"||i.type==="banner"?i.content:i.type==="youtube"?`https://img.youtube.com/vi/${i.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:d=>{d.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),!j&&!i&&(!u||!z)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black z-0"}),e.jsx("div",{className:`relative z-10 w-full px-6 py-20 flex flex-col items-center justify-center min-h-screen ${u&&z?"!p-0":""}`,children:e.jsxs("div",{className:`w-full ${g?`max-w-${g}`:"max-w-lg"} flex flex-col items-center ${u&&z?"!w-full !max-w-none":""}`,children:[!b&&e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"inline-block mb-4 px-3 py-1 bg-white/10 backdrop-blur-md rounded-full border border-white/20",style:O,children:e.jsx("span",{className:"text-sm font-semibold tracking-wide",children:a.subHeadline||"무료 자가진단"})}),!b&&e.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-8",style:{...t,..._,textShadow:t!=null&&t.gradientFrom?"none":"0 0 40px rgba(59, 130, 246, 0.5)",whiteSpace:"pre-line"},children:a.headline}),I&&e.jsx(G.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.4},className:`w-full mb-10 rounded-2xl overflow-hidden shadow-2xl relative ${u&&z?"":"bg-black/20 border border-white/10"}`,children:e.jsx("div",{className:"mx-auto overflow-y-auto",style:{width:u?z?"100vw":(v==null?void 0:v.mobileWidth)||"100%":(v==null?void 0:v.pcWidth)||"100%",height:u?z?"auto":(v==null?void 0:v.mobileHeight)||"auto":(v==null?void 0:v.pcHeight)||"auto",maxHeight:u&&z?"80vh":u?"70vh":"60vh"},children:I.type==="video"?e.jsx("video",{src:I.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):e.jsx("img",{src:I.content,className:"w-full h-full object-contain",alt:"Hero Content"})})}),a.features&&a.features.length>0&&e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"w-full max-w-4xl mx-auto mb-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.features.map((d,L)=>e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-4 flex items-center shadow-lg text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-4 shrink-0 text-blue-600 text-xl",children:d.icon||"✅"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-lg leading-tight",children:d.text}),d.subText&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:d.subText})]})]},d.id||L))})}),B.length>0&&e.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:`w-full text-left mb-8 ${s!=null&&s.hideBackground?"":"backdrop-blur-md"}`,style:{backgroundColor:s!=null&&s.hideBackground?"transparent":(s==null?void 0:s.backgroundColor)||"rgba(255, 255, 255, 0.05)",borderRadius:(s==null?void 0:s.borderRadius)||"1rem",padding:u?(s==null?void 0:s.mobilePadding)||(s==null?void 0:s.padding)||"1rem":(s==null?void 0:s.padding)||"1.5rem",border:s!=null&&s.hideBackground?"none":`1px solid ${(s==null?void 0:s.borderColor)||"rgba(255, 255, 255, 0.1)"}`,maxWidth:u?(s==null?void 0:s.mobileMaxWidth)||(s==null?void 0:s.maxWidth)||"100%":(s==null?void 0:s.maxWidth)||"100%",margin:"0 auto"},children:e.jsx(ie,{fields:B,formData:H,onChange:Y,errors:Z,formStyle:{...w,containerLayout:s==null?void 0:s.layout,containerGap:s==null?void 0:s.gap},primaryColor:W,fieldOverrides:n})}),e.jsxs(G.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,style:N,className:`group relative w-full max-w-xs mx-auto py-4 px-8 rounded-xl shadow-xl flex items-center justify-center gap-2 font-bold ${o!=null&&o.backgroundColor?"":"bg-gradient-to-r from-blue-600 to-blue-500 shadow-blue-500/30"} ${o!=null&&o.animation?`animate-btn-${o.animation}`:""}`,children:[e.jsx("span",{children:a.ctaText||"진단 시작하기"}),e.jsx(re,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsx("p",{className:"mt-6 text-gray-400 text-sm",children:"3분이면 충분합니다 • 100% 무료"})]})})]})},we=({formConfig:a,onSubmit:R,onProgressUpdate:W,finalButtonText:o,onPrev:i,showPrevButton:I,prevButtonText:b,buttonLayout:P="auto",buttonStyle:c,titleStyle:m,formStyle:g,primaryColor:t="#3b82f6",maxWidth:O,backgroundContent:H,backgroundColor:Y,backgroundImage:B,backgroundOverlay:w,hideMobileBackground:v=!1,topContent:z,fieldOverrides:n})=>{const[s,Z]=T.useState(0),[D,u]=T.useState({}),[A,V]=T.useState({}),[r,j]=T.useState(!1),[M,p]=T.useState(!1);T.useEffect(()=>{const x=()=>p(window.innerWidth<768);return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const l=ae.useMemo(()=>{const x=[];let h=[];const E=a.fields||[],F=g==null?void 0:g.fieldsPerPage;if(F===0)return E.length>0?[E]:[];const q=F||2;return E.forEach(C=>{const y=C.type==="textarea"||C.type==="address",S=F||(y?1:q);(h.length>=S||y&&!F&&h.length>0)&&(h.length>0&&x.push(h),h=[]),h.push(C),y&&!F&&(x.push(h),h=[])}),h.length>0&&x.push(h),x},[a.fields,g==null?void 0:g.fieldsPerPage]);T.useEffect(()=>{W(s,l.length)},[s,l.length,W]);const N=(x,h)=>{u(E=>({...E,[x]:h})),A[x]&&V(E=>{const F={...E};return delete F[x],F})},_=()=>{const x=l[s],h={};let E=!0;return x.forEach(F=>{F.required&&!D[F.id]&&(h[F.id]="필수 항목입니다.",E=!1)}),V(h),E},d=async()=>{if(_())if(s<l.length-1)Z(x=>x+1),window.scrollTo(0,0);else{j(!0);try{await R(D)}finally{j(!1)}}},L=()=>{s>0?(Z(x=>x-1),window.scrollTo(0,0)):i&&I!==!1&&i()},J=l[s]||[],k=(x,h,E="to right")=>{if(!x||!h)return{};const F=E.replace("to-","to ").replace("-"," ");return{backgroundImage:`linear-gradient(${F.includes("to")?F:"to right"}, ${x}, ${h})`}},Q={backgroundColor:(c==null?void 0:c.backgroundColor)||t,color:(c==null?void 0:c.textColor)||"#ffffff",fontSize:(c==null?void 0:c.fontSize)||"1.125rem",borderRadius:(c==null?void 0:c.borderRadius)||"0.75rem",...k(c==null?void 0:c.gradientFrom,c==null?void 0:c.gradientTo,c==null?void 0:c.gradientDirection),...(c==null?void 0:c.animation)==="shimmer"?{"--btn-bg":(c==null?void 0:c.backgroundColor)||t,"--btn-shine":"rgba(255,255,255,0.4)"}:{}},U={color:(m==null?void 0:m.color)||(g==null?void 0:g.questionColor)||"#1f2937",fontSize:m==null?void 0:m.fontSize,fontWeight:(m==null?void 0:m.fontWeight)||"bold",textAlign:(m==null?void 0:m.textAlign)||"center",fontFamily:m==null?void 0:m.fontFamily,...m!=null&&m.gradientFrom&&(m!=null&&m.gradientTo)?{backgroundImage:`linear-gradient(to right, ${m.gradientFrom}, ${m.gradientTo})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"}:{}},f=Y||B,X=(w??60)/100;return e.jsxs("div",{className:`flex flex-col flex-1 min-h-screen relative overflow-hidden ${f||H?"text-white":"text-gray-900 bg-white"}`,style:{backgroundColor:Y||(f?"transparent":"#ffffff"),backgroundImage:B?`url(${B})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[f&&(!M||!v)&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:X}}),!f&&H&&(!M||!v)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:H.type==="image"||H.type==="banner"?H.content:H.type==="youtube"?`https://img.youtube.com/vi/${H.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:x=>{x.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:`flex-1 w-full ${O?`max-w-${O}`:"max-w-md"} mx-auto px-6 py-8 flex flex-col justify-center relative z-10`,children:[z&&e.jsxs("div",{className:"mb-6 w-full",children:[z.type==="image"&&e.jsx("img",{src:z.content,loading:"lazy",className:"w-full h-auto rounded-lg",alt:"Top Content"}),z.type==="video"&&e.jsx("video",{src:z.content,controls:!0,className:"w-full rounded-lg"}),z.type==="youtube"&&e.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden",children:e.jsx("iframe",{src:z.content,className:"w-full h-full",title:"Video",frameBorder:"0",allowFullScreen:!0})}),z.type==="text"&&e.jsx("div",{className:"prose max-w-none text-sm",dangerouslySetInnerHTML:{__html:z.content}})]}),a.title&&e.jsx(G.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",style:U,children:a.title}),e.jsx(se,{mode:"wait",children:e.jsx(G.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:J.map(x=>{const h=n==null?void 0:n[x.id],E={...x,label:(h==null?void 0:h.label)??x.label,type:(h==null?void 0:h.type)??x.type,required:(h==null?void 0:h.required)??x.required,placeholder:(h==null?void 0:h.placeholder)??x.placeholder,options:(h==null?void 0:h.options)??x.options};return e.jsx(je,{field:E,value:D[E.id],onChange:F=>N(E.id,F),error:A[E.id],formStyle:{...g,questionFont:g==null?void 0:g.questionFont},primaryColor:t},E.id)})},s)})]}),e.jsxs("div",{className:`mt-8 w-full max-w-md mx-auto p-6 flex items-stretch gap-3 ${P==="fixed_bottom"?"fixed bottom-0 left-0 right-0 bg-white border-t z-50 p-4 max-w-full":""}`,children:[(s>0||I!==!1&&i)&&e.jsx("button",{onClick:L,className:`bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors ${P==="asymmetric"?"w-16 flex items-center justify-center p-0":"px-6 py-4"}`,title:b||"이전",children:P==="asymmetric"?e.jsx(re,{className:"w-5 h-5 rotate-180"}):s>0?"이전":b||"이전"}),e.jsx("button",{onClick:d,disabled:r,style:Q,className:`flex-1 py-4 shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2 font-bold ${c!=null&&c.animation?`animate-btn-${c.animation}`:""}`,children:r?"제출 중...":s===l.length-1?o||"결과 확인하기":e.jsxs(e.Fragment,{children:["다음 단계 ",e.jsx(re,{className:"w-5 h-5"})]})})]}),P==="fixed_bottom"&&e.jsx("div",{className:"h-24"})]})},$e=({content:a,onNext:R,nextButtonText:W,onPrev:o,showPrevButton:i,prevButtonText:I,buttonStyle:b,primaryColor:P="#3b82f6",backgroundContent:c,backgroundColor:m,backgroundImage:g,backgroundOverlay:t,maxWidth:O,titleStyle:H,subtitleStyle:Y,formData:B={},onDataChange:w=()=>{},embeddedFields:v=[],formStyle:z,mediaStyles:n,hideMobileBackground:s=!1})=>{const[Z,D]=T.useState({}),[u,A]=T.useState(!1);ae.useEffect(()=>{const N=()=>A(window.innerWidth<768);return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const V=()=>{const N={};return v.forEach(_=>{_.required&&!B[_.id]&&(N[_.id]="필수 항목을 입력해주세요.")}),D(N),Object.keys(N).length===0},r=()=>{V()&&R(B)},j=()=>{var _,d,L,J,k,Q,U;const N={width:u?s?"100vw":(n==null?void 0:n.mobileWidth)||"100%":(n==null?void 0:n.pcWidth)||"100%",height:u?s?"auto":(n==null?void 0:n.mobileHeight)||"auto":(n==null?void 0:n.pcHeight)||"auto",maxHeight:u?s?"80vh":n!=null&&n.mobileHeight&&n.mobileHeight!=="auto"?"none":"70vh":n!=null&&n.pcHeight&&n.pcHeight!=="auto"?"none":"70vh",overflowY:"auto"};switch(a.type){case"image":return e.jsx("div",{className:"mx-auto",style:N,children:e.jsx("img",{src:a.content,loading:"lazy",className:"w-full h-auto rounded-lg shadow-sm",alt:"Content"})});case"video":return e.jsx("div",{className:"mx-auto",style:N,children:e.jsx("video",{src:a.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-auto rounded-lg shadow-sm"})});case"youtube":let f=a.content;return f.includes("v=")?f=f.split("v=")[1].split("&")[0]:f.includes("youtu.be/")&&(f=f.split("youtu.be/")[1]),e.jsx("div",{className:"mx-auto",style:N,children:e.jsx("div",{className:"relative w-full pt-[56.25%] rounded-lg overflow-hidden bg-black shadow-lg",children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${f}?autoplay=${a.autoPlay?1:0}&modestbranding=1&rel=0`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})});case"map":return e.jsx("div",{className:"mx-auto",style:N,children:e.jsxs("div",{className:"w-full h-[400px] rounded-lg overflow-hidden shadow-lg border border-gray-100",children:[e.jsx(ke,{address:a.content,placeName:a.mapPlaceName}),e.jsx("div",{className:"bg-white p-3 text-sm text-gray-600 text-center border-t",children:a.mapPlaceName||"위치 정보"})]})});case"banner":return e.jsx("div",{className:"mx-auto",style:N,children:e.jsxs("div",{style:{height:((_=a.bannerStyle)==null?void 0:_.height)||"300px",backgroundColor:((d=a.bannerStyle)==null?void 0:d.backgroundColor)||"#f3f4f6",backgroundImage:(L=a.bannerStyle)!=null&&L.backgroundImage?`url(${a.bannerStyle.backgroundImage})`:void 0},className:"w-full flex items-center justify-center relative bg-cover bg-center rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:((J=a.bannerStyle)==null?void 0:J.overlayOpacity)||0}}),e.jsx("div",{className:"relative z-10 p-6 whitespace-pre-wrap",style:{color:((k=a.bannerStyle)==null?void 0:k.textColor)||"#000",textAlign:((Q=a.bannerStyle)==null?void 0:Q.textAlign)||"center",fontSize:((U=a.bannerStyle)==null?void 0:U.fontSize)||"1.5rem",fontWeight:"bold"},children:a.content})]})});default:return null}},M={backgroundColor:(b==null?void 0:b.backgroundColor)||P,color:(b==null?void 0:b.textColor)||"#ffffff",fontSize:(b==null?void 0:b.fontSize)||"1.125rem",borderRadius:(b==null?void 0:b.borderRadius)||"0.75rem"},p=m||g,l=(t??60)/100;return e.jsxs("div",{className:`relative w-full min-h-screen flex flex-col overflow-x-hidden ${p||c?"bg-gray-900":"bg-gray-50"}`,style:{backgroundColor:m||void 0,backgroundImage:g?`url(${g})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[p&&(!u||!s)&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:l}}),!p&&c&&(!u||!s)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:c.type==="image"||c.type==="banner"?c.content:c.type==="youtube"?`https://img.youtube.com/vi/${c.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:N=>{N.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsx("div",{className:`flex-1 flex flex-col items-center justify-center p-4 pb-28 relative z-10 ${u&&s?"!p-0":""}`,children:e.jsxs("div",{className:`w-full ${O?`max-w-${O}`:"max-w-screen-md"} space-y-8 ${u&&s?"!w-full":""}`,children:[j(),v.length>0&&e.jsx("div",{className:`p-6 rounded-2xl border mb-8 ${u&&s?"mx-4":""} ${p||c?"bg-white/5 border-white/10 backdrop-blur-md":"bg-gray-50 border-gray-100"}`,children:e.jsx(ie,{fields:v,formData:B,onChange:w,errors:Z,formStyle:z,primaryColor:P})})]})}),e.jsx("div",{className:`fixed bottom-0 left-0 right-0 p-4 z-50 safe-area-bottom ${p||c?"bg-gradient-to-t from-black/80 to-transparent":"bg-white border-t"}`,children:e.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[i!==!1&&o&&e.jsx("button",{onClick:o,className:`px-6 py-4 rounded-xl font-bold transition-all ${p||c?"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:I||"이전"}),e.jsx("button",{onClick:r,style:M,className:`flex-1 py-4 font-bold shadow-lg transform active:scale-95 transition-all ${b!=null&&b.animation?`animate-btn-${b.animation}`:""}`,children:W||"다음으로"})]})})]})},ze=({step:a,onPrev:R,onSubmit:W,primaryColor:o="#3b82f6",backgroundContent:i,insertedContent:I,backgroundColor:b,backgroundImage:P,backgroundOverlay:c,maxWidth:m,titleStyle:g,subtitleStyle:t,formData:O={},onDataChange:H=()=>{},embeddedFields:Y=[],formStyle:B,mediaStyles:w,hideMobileBackground:v=!1,hideTitle:z=!1})=>{var f,X,x,h,E,F,q,C,y,S,ce,oe,le,ne,de,te,he,xe,me,ge,pe,ue;const[n,s]=T.useState({privacy:!1,terms:!1,marketing:!1,thirdParty:!1}),[Z,D]=T.useState({}),[u,A]=T.useState(""),[V,r]=T.useState(!1),[j,M]=T.useState(!1);ae.useEffect(()=>{const $=()=>M(window.innerWidth<768);return $(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]);const p=()=>{const $={};return Y.forEach(K=>{K.required&&!O[K.id]&&($[K.id]="필수 항목을 입력해주세요.")}),D($),Object.keys($).length===0},l=async()=>{var $,K;if(A(""),!!p()){if(($=a.policyConfig)!=null&&$.showPrivacy&&!n.privacy){A("개인정보 수집 및 이용에 동의해주세요.");return}if((K=a.policyConfig)!=null&&K.showTerms&&!n.terms){A("이용약관에 동의해주세요.");return}r(!0);try{await W(O)}finally{r(!1)}}},N=$=>{s(K=>({...K,[$]:!K[$]})),u&&A("")},_=()=>{const $=!Object.values(n).every(K=>K);s({privacy:$,terms:$,marketing:$,thirdParty:$}),u&&A("")},d=a.buttonStyle||{},L={backgroundColor:d.backgroundColor||o,color:d.textColor||"#ffffff",fontSize:d.fontSize||"1.125rem",borderRadius:d.borderRadius||"0.75rem"},J=a.policyConfig&&Object.values(a.policyConfig).some($=>$),k=b||P,Q=(c??60)/100,U={backgroundColor:(f=a.policyStyle)!=null&&f.hideBackground?"transparent":((X=a.policyStyle)==null?void 0:X.backgroundColor)||(k||i?"rgba(255, 255, 255, 0.05)":"#f9fafb"),borderColor:(x=a.policyStyle)!=null&&x.hideBackground?"transparent":((h=a.policyStyle)==null?void 0:h.borderColor)||(k||i?"rgba(255, 255, 255, 0.1)":"#f3f4f6"),borderRadius:((E=a.policyStyle)==null?void 0:E.borderRadius)||"1rem",padding:j&&((F=a.policyStyle)!=null&&F.mobilePadding)?a.policyStyle.mobilePadding:((q=a.policyStyle)==null?void 0:q.padding)||"1.5rem",maxHeight:((C=a.policyStyle)==null?void 0:C.containerMaxHeight)||"none",overflowY:(y=a.policyStyle)!=null&&y.containerMaxHeight?"auto":"visible"};return e.jsxs("div",{className:`flex flex-col flex-1 min-h-screen relative overflow-hidden ${k||i?"bg-gray-900 text-white":"bg-white text-gray-900"}`,style:{backgroundColor:b||void 0,backgroundImage:P?`url(${P})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[k&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:Q}}),!k&&i&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:i.type==="image"||i.type==="banner"?i.content:i.type==="youtube"?`https://img.youtube.com/vi/${i.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:$=>{$.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:`flex-1 w-full ${m?`max-w-${m}`:"max-w-md"} mx-auto px-6 py-20 flex flex-col justify-center relative z-10 ${j&&v?"!p-0 !w-full !max-w-none":""}`,children:[!z&&a.title&&e.jsx("h2",{className:`text-2xl font-bold mb-8 text-center ${j&&v?"mt-20 px-6":""}`,style:g,children:a.title}),I&&e.jsx("div",{className:`w-full mb-8 rounded-xl overflow-hidden shadow-lg relative ${j&&v?"":"bg-black/20 border border-white/10"}`,children:e.jsx("div",{className:"mx-auto overflow-y-auto",style:{width:j?v?"100vw":(w==null?void 0:w.mobileWidth)||"100%":(w==null?void 0:w.pcWidth)||"100%",height:j?v?"auto":(w==null?void 0:w.mobileHeight)||"auto":(w==null?void 0:w.pcHeight)||"auto",maxHeight:j?v?"80vh":w!=null&&w.mobileHeight&&w.mobileHeight!=="auto"?"none":"400px":w!=null&&w.pcHeight&&w.pcHeight!=="auto"?"none":"400px"},children:I.type==="video"?e.jsx("video",{src:I.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):I.type==="youtube"?e.jsx("div",{className:"relative w-full pt-[56.25%]",children:e.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${I.content}?autoplay=0&controls=1&rel=0`,title:"YouTube video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):e.jsx("img",{src:I.content,alt:"Inserted Content",className:"w-full h-full object-contain"})})}),Y.length>0&&e.jsx("div",{className:`p-6 rounded-2xl border mb-8 ${k||i?"bg-white/5 border-white/10 backdrop-blur-md":"bg-gray-50 border-gray-100"}`,children:e.jsx(ie,{fields:Y,formData:O,onChange:H,errors:Z,formStyle:B,primaryColor:o})}),J&&e.jsxs("div",{className:`mb-8 border shadow-sm ${k||i?"backdrop-blur-md":""}`,style:U,children:[e.jsxs("div",{className:`flex items-center justify-between mb-4 pb-4 border-b ${k||i?"border-white/10":"border-gray-200"}`,style:{fontSize:((S=a.policyStyle)==null?void 0:S.labelFontSize)||"1rem"},children:[e.jsx("span",{className:"font-bold",children:"약관 전체 동의"}),e.jsx("button",{onClick:_,className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${Object.values(n).every($=>$)?"bg-blue-500 border-blue-500 text-white":"border-gray-300"}`,children:Object.values(n).every($=>$)&&e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",style:{gap:((ce=a.policyStyle)==null?void 0:ce.itemGap)||"1rem"},children:[((oe=a.policyConfig)==null?void 0:oe.showPrivacy)&&e.jsx(ee,{label:"[필수] 개인정보 수집 및 이용 동의",checked:n.privacy,onChange:()=>N("privacy"),hideBg:k||i,fontSize:(le=a.policyStyle)==null?void 0:le.itemFontSize}),((ne=a.policyConfig)==null?void 0:ne.showTerms)&&e.jsx(ee,{label:"[필수] 이용약관 동의",checked:n.terms,onChange:()=>N("terms"),hideBg:k||i,fontSize:(de=a.policyStyle)==null?void 0:de.itemFontSize}),((te=a.policyConfig)==null?void 0:te.showMarketing)&&e.jsx(ee,{label:"[선택] 마케팅 정보 수신 동의",checked:n.marketing,onChange:()=>N("marketing"),hideBg:k||i,fontSize:(he=a.policyStyle)==null?void 0:he.itemFontSize}),((xe=a.policyConfig)==null?void 0:xe.showThirdParty)&&e.jsx(ee,{label:"[선택] 제3자 정보 제공 동의",checked:n.thirdParty,onChange:()=>N("thirdParty"),hideBg:k||i,fontSize:(me=a.policyStyle)==null?void 0:me.itemFontSize})]})]}),u&&e.jsx("p",{className:"text-red-500 text-center mb-4 text-sm font-medium animate-pulse",children:u})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 z-50 safe-area-bottom",children:e.jsxs("div",{className:`max-w-md mx-auto flex gap-3 ${((ge=a.buttonStyle)==null?void 0:ge.alignment)==="left"?"justify-start":((pe=a.buttonStyle)==null?void 0:pe.alignment)==="right"?"justify-end":"justify-center"}`,children:[a.showPrevButton!==!1&&R&&e.jsx("button",{onClick:R,className:`px-6 py-4 rounded-xl font-bold transition-all shrink-0 ${k||i?"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a.prevButtonText||"이전"}),e.jsx("button",{onClick:l,disabled:V,style:{...L,fontFamily:d.fontFamily,width:d.width==="full"?"100%":d.width==="xs"?"128px":d.width==="sm"?"192px":d.width==="md"?"256px":d.width==="lg"?"320px":d.width==="xl"?"384px":d.width==="auto"?"auto":void 0,flex:d.width==="full"||!d.width?"1":"none"},className:`py-4 font-bold shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2 ${(ue=a.buttonStyle)!=null&&ue.animation&&a.buttonStyle.animation!=="none"?`animate-btn-${a.buttonStyle.animation}`:""}`,children:V?"처리중...":a.buttonText||"신청완료"})]})}),e.jsx("div",{className:"h-24"})]})},ee=({label:a,checked:R,onChange:W,hideBg:o,fontSize:i})=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:W,children:[e.jsx("span",{className:`text-sm ${o?"text-gray-300":"text-gray-600"}`,style:{fontSize:i||"0.875rem"},children:a}),e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${R?"bg-blue-500 border-blue-500 text-white":o?"border-white/30":"border-gray-300"}`,children:R&&e.jsx(Ne,{className:"w-3 h-3"})})]}),ve=({currentStep:a,totalSteps:R})=>{const W=Math.min(100,Math.round((a+1)/R*100));return e.jsx("div",{className:"w-full fixed top-0 left-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500",children:"진행률"}),e.jsxs("span",{className:"text-xs font-bold text-brand-600",children:[W,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx(G.div,{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600",initial:{width:0},animate:{width:`${W}%`},transition:{duration:.5,ease:"easeOut"}})})]})})},Ee=({config:a,onSubmit:R,utmParams:W})=>{var D,u,A,V;const o=a.steps&&a.steps.length>0,[i,I]=T.useState("hero"),[b,P]=T.useState(0),[c,m]=T.useState(0),[g,t]=T.useState(0),[O,H]=T.useState({}),[Y,B]=T.useState(!1),w=!a.id||a.id.startsWith("preview_"),v=()=>{I("form")},z=async r=>{const j={timestamp:new Date().toISOString(),landing_id:a.id,name:r.name||"Anonymous",phone:r.phone||"",user_agent:navigator.userAgent,referrer:document.referrer,...W,...r};await R(j),fe(a.pixelConfig),I("success")},n=async(r={})=>{const j={...O,...r};if(H(j),a.steps&&g<a.steps.length-1)t(M=>M+1),window.scrollTo(0,0);else{if(w){alert(`✅ 미리보기 모드

실제 배포 시 여기서 폼이 제출됩니다.
에디터로 돌아가서 계속 편집하세요.`);return}const M={timestamp:new Date().toISOString(),landing_id:a.id,name:j.name||"Anonymous",phone:j.phone||"",user_agent:navigator.userAgent,referrer:document.referrer,...W,...j};await R(M),fe(a.pixelConfig),B(!0)}},s=()=>{g>0&&(t(r=>r-1),window.scrollTo(0,0))},Z=()=>e.jsxs(G.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"min-h-screen flex flex-col items-center justify-center p-6 text-center bg-white",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(G.div,{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1},children:e.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"제출이 완료되었습니다!"}),e.jsxs("p",{className:"text-gray-600 max-w-sm mb-8",children:["담당자가 내용을 확인 후 빠르게 연락드리겠습니다.",e.jsx("br",{}),"감사합니다."]}),e.jsx("button",{onClick:()=>{B(!1),t(0),H({}),window.scrollTo(0,0)},className:"text-sm text-gray-500 underline hover:text-gray-800 transition-colors",children:"다시 입력 하기"})]},"success");if(i==="success"||Y)return e.jsx("div",{className:"min-h-screen bg-white font-sans",children:Z()});if(o&&a.steps){const r=a.steps[g],j=r.type==="intro",M=r.contentId?(D=a.detailContent)==null?void 0:D.find(f=>f.id===r.contentId):void 0,p=a.steps.find(f=>f.type==="intro"),l=p?{backgroundColor:p.backgroundColor,backgroundImage:p.backgroundImage,backgroundOverlay:p.backgroundOverlay,hideMobileBackground:p.hideMobileBackground}:void 0,N=p==null?void 0:p.titleStyle,_=p==null?void 0:p.subtitleStyle,d=p==null?void 0:p.buttonStyle,L=p!=null&&p.contentId?(u=a.detailContent)==null?void 0:u.find(f=>f.id===p.contentId):void 0,J=p==null?void 0:p.maxWidth,k=(a.formConfig.fields||[]).filter(f=>(r.fieldIds||[]).includes(f.id)),Q=(r.type==="intro"||r.type==="outro")&&r.insertedContentId?(A=a.detailContent)==null?void 0:A.find(f=>f.id===r.insertedContentId):void 0,U={formData:O,onDataChange:(f,X)=>H(x=>({...x,[f]:X})),formConfig:a.formConfig,primaryColor:a.theme.primaryColor,maxWidth:r.maxWidth||J,buttonStyle:r.buttonStyle||d,titleStyle:r.titleStyle||N,subtitleStyle:r.subtitleStyle||_,formStyle:r.formStyle,mediaStyles:r.mediaStyles};return e.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:[!j&&e.jsx(ve,{currentStep:g,totalSteps:a.steps.length}),e.jsx(se,{mode:"wait",children:e.jsxs(G.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-screen",children:[r.type==="intro"&&e.jsx(be,{...U,heroConfig:{...a.hero,headline:r.title||a.hero.headline,ctaText:r.buttonText||a.hero.ctaText,features:r.features||a.hero.features},onStart:()=>n(),backgroundContent:M,insertedContent:Q,hideTitle:r.hideTitle,backgroundColor:r.backgroundColor,backgroundImage:r.backgroundImage,backgroundOverlay:r.backgroundOverlay,embeddedFields:k,hideMobileBackground:r.hideMobileBackground,fieldOverrides:r.fieldOverrides,questionContainerStyle:r.questionContainerStyle}),r.type==="content"&&e.jsx($e,{...U,content:((V=a.detailContent)==null?void 0:V.find(f=>f.id===r.contentId))||{id:"fallback",type:"image",content:""},onNext:()=>n(),nextButtonText:r.buttonText,onPrev:s,showPrevButton:r.showPrevButton,prevButtonText:r.prevButtonText,backgroundContent:L,backgroundColor:l==null?void 0:l.backgroundColor,backgroundImage:l==null?void 0:l.backgroundImage,backgroundOverlay:l==null?void 0:l.backgroundOverlay,embeddedFields:k,hideMobileBackground:l==null?void 0:l.hideMobileBackground,fieldOverrides:r.fieldOverrides}),r.type==="form"&&e.jsx(we,{...U,formConfig:{...a.formConfig,title:r.title||a.formConfig.title,fields:k},onSubmit:f=>n(f),onProgressUpdate:()=>{},finalButtonText:r.buttonText,onPrev:s,showPrevButton:r.showPrevButton,prevButtonText:r.prevButtonText,backgroundContent:L,backgroundColor:l==null?void 0:l.backgroundColor,backgroundImage:l==null?void 0:l.backgroundImage,backgroundOverlay:l==null?void 0:l.backgroundOverlay,hideMobileBackground:l==null?void 0:l.hideMobileBackground,fieldOverrides:r.fieldOverrides,topContent:r.topContent}),r.type==="outro"&&e.jsx(ze,{...U,step:r,onPrev:s,onSubmit:n,backgroundContent:M||L,insertedContent:Q,backgroundColor:r.backgroundColor||(l==null?void 0:l.backgroundColor),backgroundImage:r.backgroundImage||(l==null?void 0:l.backgroundImage),backgroundOverlay:r.backgroundOverlay??(l==null?void 0:l.backgroundOverlay),embeddedFields:k,hideMobileBackground:r.hideMobileBackground??(l==null?void 0:l.hideMobileBackground),hideTitle:r.hideTitle,fieldOverrides:r.fieldOverrides})]},r.id)})]})}return e.jsx("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:e.jsxs(se,{mode:"wait",children:[i==="hero"&&e.jsx(G.div,{exit:{opacity:0,y:-50},transition:{duration:.5},children:e.jsx(be,{heroConfig:a.hero,onStart:v,primaryColor:a.theme.primaryColor})},"hero"),i==="form"&&e.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col",children:[e.jsx(ve,{currentStep:b,totalSteps:c}),e.jsx(we,{formConfig:a.formConfig,onSubmit:z,onProgressUpdate:(r,j)=>{P(r),m(j)}})]},"form")]})})};export{Ee as default};
