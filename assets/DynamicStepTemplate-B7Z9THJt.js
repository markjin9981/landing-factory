import{j as e,m as t,A as o}from"./animation-Dic0VY_j.js";import{r as l,R as i}from"./vendor-B42Fopx7.js";import{U as n,A as r,K as a,C as d,t as s}from"./LandingPage-D0xPxPAT.js";import"./index-nvTOtYcA.js";import"./supabase-BnJ3Hf6T.js";import"./users-CHdYKsM5.js";import"./googleSheetService-cfWdSa8H.js";import"./mail-C7-aZqF3.js";import"./database-BGptr2kc.js";import"./shield-Cx5SyjBo.js";import"./file-text-yloN019A.js";import"./x-Bk2wiqtD.js";import"./clock-DY30Qxvu.js";import"./chevron-right-CWAa2xSo.js";import"./phone-CxwjK0xW.js";import"./PolicyConfig-C94ZsJGm.js";import"./download-B7-s3mmV.js";import"./user-BvjIq_G3.js";import"./calendar-CXo4SSaH.js";import"./search-DiaaKXNC.js";const c=({fields:t,formData:o,onChange:l,errors:i,formStyle:r,primaryColor:a="#3b82f6",fieldOverrides:d={}})=>{const s=(null==r?void 0:r.containerLayout)||"standard",c=(null==r?void 0:r.containerGap)||("inline"===s?"0.5rem":"compact"===s?"0.75rem":"1.5rem"),u=["w-full overflow-y-auto","inline"===s?"flex flex-wrap items-end":"space-y-4"].filter(Boolean).join(" ");return e.jsx("div",{className:u,style:{backgroundColor:null==r?void 0:r.containerBgColor,opacity:(null==r?void 0:r.containerBgOpacity)?r.containerBgOpacity/100:1,maxHeight:null==r?void 0:r.containerMaxHeight,borderColor:null==r?void 0:r.containerBorderColor,borderRadius:null==r?void 0:r.containerBorderRadius,padding:null==r?void 0:r.containerPadding,gap:c},children:t.map(t=>{const c=d[t.id],u={...t,label:(null==c?void 0:c.label)??t.label,type:(null==c?void 0:c.type)??t.type,required:(null==c?void 0:c.required)??t.required,placeholder:(null==c?void 0:c.placeholder)??t.placeholder,options:(null==c?void 0:c.options)??t.options};return e.jsx(n,{field:u,value:o[u.id],onChange:e=>l(u.id,e),error:i[u.id],formStyle:r,primaryColor:a,layout:s},u.id)})})},u=({heroConfig:o,onStart:n,primaryColor:a,buttonStyle:d,backgroundContent:s,insertedContent:u,hideTitle:m,backgroundColor:g,backgroundImage:b,backgroundOverlay:h,maxWidth:x,titleStyle:f,subtitleStyle:v,formData:y={},onDataChange:p=()=>{},embeddedFields:w=[],formStyle:j,mediaStyles:k,hideMobileBackground:C=!1,fieldOverrides:S,questionContainerStyle:N})=>{const[B,z]=l.useState({}),[T,P]=l.useState(!1);i.useEffect(()=>{const e=()=>P(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const $=g||b,I=(h??60)/100,O=((e,t,o="to right")=>{if(!e||!t)return{};const l=o.replace("to-","to ").replace("-"," ");return{backgroundImage:`linear-gradient(${l.includes("to")?l:"to right"}, ${e}, ${t})`}})(null==d?void 0:d.gradientFrom,null==d?void 0:d.gradientTo,null==d?void 0:d.gradientDirection),F={backgroundColor:(null==d?void 0:d.backgroundColor)||a,color:(null==d?void 0:d.textColor)||"#ffffff",fontSize:null==d?void 0:d.fontSize,borderRadius:null==d?void 0:d.borderRadius,fontFamily:null==d?void 0:d.fontFamily,fontWeight:null==d?void 0:d.fontWeight,...O},W=(null==f?void 0:f.gradientFrom)&&(null==f?void 0:f.gradientTo)?{backgroundImage:`linear-gradient(to right, ${f.gradientFrom}, ${f.gradientTo})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"}:{};return e.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden text-white flex flex-col justify-center items-center px-6 text-center",style:{backgroundColor:g||void 0,backgroundImage:b?`url(${b})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[$&&(!T||!C)&&e.jsx("div",{className:"absolute inset-0 bg-black z-0",style:{opacity:I}}),!$&&s&&(!T||!C)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"image"===s.type||"banner"===s.type?s.content:"youtube"===s.type?`https://img.youtube.com/vi/${s.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:e=>{e.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),!$&&!s&&(!T||!C)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black z-0"}),e.jsx("div",{className:"relative z-10 w-full px-6 py-20 flex flex-col items-center justify-center min-h-screen "+(T&&C?"!p-0":""),children:e.jsxs("div",{className:`w-full ${x?`max-w-${x}`:"max-w-lg"} flex flex-col items-center ${T&&C?"!w-full !max-w-none":""}`,children:[!m&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"inline-block mb-4 px-3 py-1 bg-white/10 backdrop-blur-md rounded-full border border-white/20",style:v,children:e.jsx("span",{className:"text-sm font-semibold tracking-wide",children:o.subHeadline||"무료 자가진단"})}),!m&&e.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-8",style:{...f,...W,textShadow:(null==f?void 0:f.gradientFrom)?"none":"0 0 40px rgba(59, 130, 246, 0.5)",whiteSpace:"pre-line"},children:o.headline}),u&&e.jsx(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.4},className:"w-full mb-10 rounded-2xl overflow-hidden shadow-2xl relative "+(T&&C?"":"bg-black/20 border border-white/10"),children:e.jsx("div",{className:"mx-auto overflow-y-auto",style:{width:T?C?"100vw":(null==k?void 0:k.mobileWidth)||"100%":(null==k?void 0:k.pcWidth)||"100%",height:T?C?"auto":(null==k?void 0:k.mobileHeight)||"auto":(null==k?void 0:k.pcHeight)||"auto",maxHeight:T&&C?"80vh":T?"70vh":"60vh"},children:"video"===u.type?e.jsx("video",{src:u.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):e.jsx("img",{src:u.content,className:"w-full h-full object-contain",alt:"Hero Content"})})}),o.features&&o.features.length>0&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"w-full max-w-4xl mx-auto mb-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.features.map((t,o)=>e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-4 flex items-center shadow-lg text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-4 shrink-0 text-blue-600 text-xl",children:t.icon||"✅"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-lg leading-tight",children:t.text}),t.subText&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:t.subText})]})]},t.id||o))})}),w.length>0&&e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"w-full text-left mb-8 "+((null==N?void 0:N.hideBackground)?"":"backdrop-blur-md"),style:{backgroundColor:(null==N?void 0:N.hideBackground)?"transparent":(null==N?void 0:N.backgroundColor)||"rgba(255, 255, 255, 0.05)",borderRadius:(null==N?void 0:N.borderRadius)||"1rem",padding:T?(null==N?void 0:N.mobilePadding)||(null==N?void 0:N.padding)||"1rem":(null==N?void 0:N.padding)||"1.5rem",border:(null==N?void 0:N.hideBackground)?"none":`1px solid ${(null==N?void 0:N.borderColor)||"rgba(255, 255, 255, 0.1)"}`,maxWidth:T?(null==N?void 0:N.mobileMaxWidth)||(null==N?void 0:N.maxWidth)||"100%":(null==N?void 0:N.maxWidth)||"100%",margin:"0 auto"},children:e.jsx(c,{fields:w,formData:y,onChange:p,errors:B,formStyle:{...j,containerLayout:null==N?void 0:N.layout,containerGap:null==N?void 0:N.gap},primaryColor:a,fieldOverrides:S})}),e.jsxs(t.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{(()=>{const e={};return w.forEach(t=>{t.required&&!y[t.id]&&(e[t.id]="필수 항목을 입력해주세요.")}),z(e),0===Object.keys(e).length})()&&n(y)},style:F,className:`group relative w-full max-w-xs mx-auto py-4 px-8 rounded-xl shadow-xl flex items-center justify-center gap-2 font-bold ${(null==d?void 0:d.backgroundColor)?"":"bg-gradient-to-r from-blue-600 to-blue-500 shadow-blue-500/30"} ${(null==d?void 0:d.animation)?`animate-btn-${d.animation}`:""}`,children:[e.jsx("span",{children:o.ctaText||"진단 시작하기"}),e.jsx(r,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsx("p",{className:"mt-6 text-gray-400 text-sm",children:"3분이면 충분합니다 • 100% 무료"})]})})]})},m=({formConfig:a,onSubmit:d,onProgressUpdate:s,finalButtonText:c,onPrev:u,showPrevButton:m,prevButtonText:g,buttonLayout:b="auto",buttonStyle:h,titleStyle:x,formStyle:f,primaryColor:v="#3b82f6",maxWidth:y,backgroundContent:p,backgroundColor:w,backgroundImage:j,backgroundOverlay:k,hideMobileBackground:C=!1,topContent:S,fieldOverrides:N})=>{const[B,z]=l.useState(0),[T,P]=l.useState({}),[$,I]=l.useState({}),[O,F]=l.useState(!1),[W,H]=l.useState(!1);l.useEffect(()=>{const e=()=>H(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const M=i.useMemo(()=>{const e=[];let t=[];const o=a.fields||[],l=null==f?void 0:f.fieldsPerPage;if(0===l)return o.length>0?[o]:[];const i=l||2;return o.forEach(o=>{const n="textarea"===o.type||"address"===o.type,r=l||(n?1:i);(t.length>=r||n&&!l&&t.length>0)&&(t.length>0&&e.push(t),t=[]),t.push(o),n&&!l&&(e.push(t),t=[])}),t.length>0&&e.push(t),e},[a.fields,null==f?void 0:f.fieldsPerPage]);l.useEffect(()=>{s(B,M.length)},[B,M.length,s]);const E=M[B]||[],L={backgroundColor:(null==h?void 0:h.backgroundColor)||v,color:(null==h?void 0:h.textColor)||"#ffffff",fontSize:(null==h?void 0:h.fontSize)||"1.125rem",borderRadius:(null==h?void 0:h.borderRadius)||"0.75rem",...((e,t,o="to right")=>{if(!e||!t)return{};const l=o.replace("to-","to ").replace("-"," ");return{backgroundImage:`linear-gradient(${l.includes("to")?l:"to right"}, ${e}, ${t})`}})(null==h?void 0:h.gradientFrom,null==h?void 0:h.gradientTo,null==h?void 0:h.gradientDirection),..."shimmer"===(null==h?void 0:h.animation)?{"--btn-bg":(null==h?void 0:h.backgroundColor)||v,"--btn-shine":"rgba(255,255,255,0.4)"}:{}},q={color:(null==x?void 0:x.color)||(null==f?void 0:f.questionColor)||"#1f2937",fontSize:null==x?void 0:x.fontSize,fontWeight:(null==x?void 0:x.fontWeight)||"bold",textAlign:(null==x?void 0:x.textAlign)||"center",fontFamily:null==x?void 0:x.fontFamily,...(null==x?void 0:x.gradientFrom)&&(null==x?void 0:x.gradientTo)?{backgroundImage:`linear-gradient(to right, ${x.gradientFrom}, ${x.gradientTo})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"}:{}},D=w||j,R=(k??60)/100;return e.jsxs("div",{className:"flex flex-col flex-1 min-h-screen relative overflow-hidden "+(D||p?"text-white":"text-gray-900 bg-white"),style:{backgroundColor:w||(D?"transparent":"#ffffff"),backgroundImage:j?`url(${j})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[D&&(!W||!C)&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:R}}),!D&&p&&(!W||!C)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"image"===p.type||"banner"===p.type?p.content:"youtube"===p.type?`https://img.youtube.com/vi/${p.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:e=>{e.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:`flex-1 w-full ${y?`max-w-${y}`:"max-w-md"} mx-auto px-6 py-8 flex flex-col justify-center relative z-10`,children:[S&&e.jsxs("div",{className:"mb-6 w-full",children:["image"===S.type&&e.jsx("img",{src:S.content,loading:"lazy",className:"w-full h-auto rounded-lg",alt:"Top Content"}),"video"===S.type&&e.jsx("video",{src:S.content,controls:!0,className:"w-full rounded-lg"}),"youtube"===S.type&&e.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden",children:e.jsx("iframe",{src:S.content,className:"w-full h-full",title:"Video",frameBorder:"0",allowFullScreen:!0})}),"text"===S.type&&e.jsx("div",{className:"prose max-w-none text-sm",dangerouslySetInnerHTML:{__html:S.content}})]}),a.title&&e.jsx(t.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",style:q,children:a.title}),e.jsx(o,{mode:"wait",children:e.jsx(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:E.map(t=>{const o=null==N?void 0:N[t.id],l={...t,label:(null==o?void 0:o.label)??t.label,type:(null==o?void 0:o.type)??t.type,required:(null==o?void 0:o.required)??t.required,placeholder:(null==o?void 0:o.placeholder)??t.placeholder,options:(null==o?void 0:o.options)??t.options};return e.jsx(n,{field:l,value:T[l.id],onChange:e=>{return t=l.id,o=e,P(e=>({...e,[t]:o})),void($[t]&&I(e=>{const o={...e};return delete o[t],o}));var t,o},error:$[l.id],formStyle:{...f,questionFont:null==f?void 0:f.questionFont},primaryColor:v},l.id)})},B)})]}),e.jsxs("div",{className:"mt-8 w-full max-w-md mx-auto p-6 flex items-stretch gap-3 "+("fixed_bottom"===b?"fixed bottom-0 left-0 right-0 bg-white border-t z-50 p-4 max-w-full":""),children:[(B>0||!1!==m&&u)&&e.jsx("button",{onClick:()=>{B>0?(z(e=>e-1),window.scrollTo(0,0)):u&&!1!==m&&u()},className:"bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors "+("asymmetric"===b?"w-16 flex items-center justify-center p-0":"px-6 py-4"),title:g||"이전",children:"asymmetric"===b?e.jsx(r,{className:"w-5 h-5 rotate-180"}):B>0?"이전":g||"이전"}),e.jsx("button",{onClick:async()=>{if((()=>{const e=M[B],t={};let o=!0;return e.forEach(e=>{e.required&&!T[e.id]&&(t[e.id]="필수 항목입니다.",o=!1)}),I(t),o})())if(B<M.length-1)z(e=>e+1),window.scrollTo(0,0);else{F(!0);try{await d(T)}finally{F(!1)}}},disabled:O,style:L,className:"flex-1 py-4 shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2 font-bold "+((null==h?void 0:h.animation)?`animate-btn-${h.animation}`:""),children:O?"제출 중...":B===M.length-1?c||"결과 확인하기":e.jsxs(e.Fragment,{children:["다음 단계 ",e.jsx(r,{className:"w-5 h-5"})]})})]}),"fixed_bottom"===b&&e.jsx("div",{className:"h-24"})]})},g=({content:t,onNext:o,nextButtonText:n,onPrev:r,showPrevButton:d,prevButtonText:s,buttonStyle:u,primaryColor:m="#3b82f6",backgroundContent:g,backgroundColor:b,backgroundImage:h,backgroundOverlay:x,maxWidth:f,titleStyle:v,subtitleStyle:y,formData:p={},onDataChange:w=()=>{},embeddedFields:j=[],formStyle:k,mediaStyles:C,hideMobileBackground:S=!1})=>{const[N,B]=l.useState({}),[z,T]=l.useState(!1);i.useEffect(()=>{const e=()=>T(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const P={backgroundColor:(null==u?void 0:u.backgroundColor)||m,color:(null==u?void 0:u.textColor)||"#ffffff",fontSize:(null==u?void 0:u.fontSize)||"1.125rem",borderRadius:(null==u?void 0:u.borderRadius)||"0.75rem"},$=b||h,I=(x??60)/100;return e.jsxs("div",{className:"relative w-full min-h-screen flex flex-col overflow-x-hidden "+($||g?"bg-gray-900":"bg-gray-50"),style:{backgroundColor:b||void 0,backgroundImage:h?`url(${h})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[$&&(!z||!S)&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:I}}),!$&&g&&(!z||!S)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"image"===g.type||"banner"===g.type?g.content:"youtube"===g.type?`https://img.youtube.com/vi/${g.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:e=>{e.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 pb-28 relative z-10 "+(z&&S?"!p-0":""),children:e.jsxs("div",{className:`w-full ${f?`max-w-${f}`:"max-w-screen-md"} space-y-8 ${z&&S?"!w-full":""}`,children:[(()=>{var o,l,i,n,r,d,s;const c={width:z?S?"100vw":(null==C?void 0:C.mobileWidth)||"100%":(null==C?void 0:C.pcWidth)||"100%",height:z?S?"auto":(null==C?void 0:C.mobileHeight)||"auto":(null==C?void 0:C.pcHeight)||"auto",maxHeight:z?S?"80vh":(null==C?void 0:C.mobileHeight)&&"auto"!==C.mobileHeight?"none":"70vh":(null==C?void 0:C.pcHeight)&&"auto"!==C.pcHeight?"none":"70vh",overflowY:"auto"};switch(t.type){case"image":return e.jsx("div",{className:"mx-auto",style:c,children:e.jsx("img",{src:t.content,loading:"lazy",className:"w-full h-auto rounded-lg shadow-sm",alt:"Content"})});case"video":return e.jsx("div",{className:"mx-auto",style:c,children:e.jsx("video",{src:t.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-auto rounded-lg shadow-sm"})});case"youtube":let u=t.content;return u.includes("v=")?u=u.split("v=")[1].split("&")[0]:u.includes("youtu.be/")&&(u=u.split("youtu.be/")[1]),e.jsx("div",{className:"mx-auto",style:c,children:e.jsx("div",{className:"relative w-full pt-[56.25%] rounded-lg overflow-hidden bg-black shadow-lg",children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${u}?autoplay=${t.autoPlay?1:0}&modestbranding=1&rel=0`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})});case"map":return e.jsx("div",{className:"mx-auto",style:c,children:e.jsxs("div",{className:"w-full h-[400px] rounded-lg overflow-hidden shadow-lg border border-gray-100",children:[e.jsx(a,{address:t.content,placeName:t.mapPlaceName}),e.jsx("div",{className:"bg-white p-3 text-sm text-gray-600 text-center border-t",children:t.mapPlaceName||"위치 정보"})]})});case"banner":return e.jsx("div",{className:"mx-auto",style:c,children:e.jsxs("div",{style:{height:(null==(o=t.bannerStyle)?void 0:o.height)||"300px",backgroundColor:(null==(l=t.bannerStyle)?void 0:l.backgroundColor)||"#f3f4f6",backgroundImage:(null==(i=t.bannerStyle)?void 0:i.backgroundImage)?`url(${t.bannerStyle.backgroundImage})`:void 0},className:"w-full flex items-center justify-center relative bg-cover bg-center rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:(null==(n=t.bannerStyle)?void 0:n.overlayOpacity)||0}}),e.jsx("div",{className:"relative z-10 p-6 whitespace-pre-wrap",style:{color:(null==(r=t.bannerStyle)?void 0:r.textColor)||"#000",textAlign:(null==(d=t.bannerStyle)?void 0:d.textAlign)||"center",fontSize:(null==(s=t.bannerStyle)?void 0:s.fontSize)||"1.5rem",fontWeight:"bold"},children:t.content})]})});default:return null}})(),j.length>0&&e.jsx("div",{className:`p-6 rounded-2xl border mb-8 ${z&&S?"mx-4":""} ${$||g?"bg-white/5 border-white/10 backdrop-blur-md":"bg-gray-50 border-gray-100"}`,children:e.jsx(c,{fields:j,formData:p,onChange:w,errors:N,formStyle:k,primaryColor:m})})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 z-50 safe-area-bottom "+($||g?"bg-gradient-to-t from-black/80 to-transparent":"bg-white border-t"),children:e.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[!1!==d&&r&&e.jsx("button",{onClick:r,className:"px-6 py-4 rounded-xl font-bold transition-all "+($||g?"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s||"이전"}),e.jsx("button",{onClick:()=>{(()=>{const e={};return j.forEach(t=>{t.required&&!p[t.id]&&(e[t.id]="필수 항목을 입력해주세요.")}),B(e),0===Object.keys(e).length})()&&o(p)},style:P,className:"flex-1 py-4 font-bold shadow-lg transform active:scale-95 transition-all "+((null==u?void 0:u.animation)?`animate-btn-${u.animation}`:""),children:n||"다음으로"})]})})]})},b=({step:t,onPrev:o,onSubmit:n,primaryColor:r="#3b82f6",backgroundContent:a,insertedContent:s,backgroundColor:u,backgroundImage:m,backgroundOverlay:g,maxWidth:b,titleStyle:x,subtitleStyle:f,formData:v={},onDataChange:y=()=>{},embeddedFields:p=[],formStyle:w,mediaStyles:j,hideMobileBackground:k=!1,hideTitle:C=!1})=>{var S,N,B,z,T,P,$,I,O,F,W,H,M,E,L,q,D,R,A,_,G,U;const[Y,K]=l.useState({privacy:!1,terms:!1,marketing:!1,thirdParty:!1}),[V,J]=l.useState({}),[Q,X]=l.useState(""),[Z,ee]=l.useState(!1),[te,oe]=l.useState(!1);i.useEffect(()=>{const e=()=>oe(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const le=e=>{K(t=>({...t,[e]:!t[e]})),Q&&X("")},ie=t.buttonStyle||{},ne={backgroundColor:ie.backgroundColor||r,color:ie.textColor||"#ffffff",fontSize:ie.fontSize||"1.125rem",borderRadius:ie.borderRadius||"0.75rem"},re=t.policyConfig&&Object.values(t.policyConfig).some(e=>e),ae=u||m,de=(g??60)/100,se={backgroundColor:(null==(S=t.policyStyle)?void 0:S.hideBackground)?"transparent":(null==(N=t.policyStyle)?void 0:N.backgroundColor)||(ae||a?"rgba(255, 255, 255, 0.05)":"#f9fafb"),borderColor:(null==(B=t.policyStyle)?void 0:B.hideBackground)?"transparent":(null==(z=t.policyStyle)?void 0:z.borderColor)||(ae||a?"rgba(255, 255, 255, 0.1)":"#f3f4f6"),borderRadius:(null==(T=t.policyStyle)?void 0:T.borderRadius)||"1rem",padding:te&&(null==(P=t.policyStyle)?void 0:P.mobilePadding)?t.policyStyle.mobilePadding:(null==($=t.policyStyle)?void 0:$.padding)||"1.5rem",maxHeight:(null==(I=t.policyStyle)?void 0:I.containerMaxHeight)||"none",overflowY:(null==(O=t.policyStyle)?void 0:O.containerMaxHeight)?"auto":"visible"};return e.jsxs("div",{className:"flex flex-col flex-1 min-h-screen relative overflow-hidden "+(ae||a?"bg-gray-900 text-white":"bg-white text-gray-900"),style:{backgroundColor:u||void 0,backgroundImage:m?`url(${m})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[ae&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:de}}),!ae&&a&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"image"===a.type||"banner"===a.type?a.content:"youtube"===a.type?`https://img.youtube.com/vi/${a.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:e=>{e.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:`flex-1 w-full ${b?`max-w-${b}`:"max-w-md"} mx-auto px-6 py-20 flex flex-col justify-center relative z-10 ${te&&k?"!p-0 !w-full !max-w-none":""}`,children:[!C&&t.title&&e.jsx("h2",{className:"text-2xl font-bold mb-8 text-center "+(te&&k?"mt-20 px-6":""),style:x,children:t.title}),s&&e.jsx("div",{className:"w-full mb-8 rounded-xl overflow-hidden shadow-lg relative "+(te&&k?"":"bg-black/20 border border-white/10"),children:e.jsx("div",{className:"mx-auto overflow-y-auto",style:{width:te?k?"100vw":(null==j?void 0:j.mobileWidth)||"100%":(null==j?void 0:j.pcWidth)||"100%",height:te?k?"auto":(null==j?void 0:j.mobileHeight)||"auto":(null==j?void 0:j.pcHeight)||"auto",maxHeight:te?k?"80vh":(null==j?void 0:j.mobileHeight)&&"auto"!==j.mobileHeight?"none":"400px":(null==j?void 0:j.pcHeight)&&"auto"!==j.pcHeight?"none":"400px"},children:"video"===s.type?e.jsx("video",{src:s.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):"youtube"===s.type?e.jsx("div",{className:"relative w-full pt-[56.25%]",children:e.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${s.content}?autoplay=0&controls=1&rel=0`,title:"YouTube video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):e.jsx("img",{src:s.content,alt:"Inserted Content",className:"w-full h-full object-contain"})})}),p.length>0&&e.jsx("div",{className:"p-6 rounded-2xl border mb-8 "+(ae||a?"bg-white/5 border-white/10 backdrop-blur-md":"bg-gray-50 border-gray-100"),children:e.jsx(c,{fields:p,formData:v,onChange:y,errors:V,formStyle:w,primaryColor:r})}),re&&e.jsxs("div",{className:"mb-8 border shadow-sm "+(ae||a?"backdrop-blur-md":""),style:se,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b "+(ae||a?"border-white/10":"border-gray-200"),style:{fontSize:(null==(F=t.policyStyle)?void 0:F.labelFontSize)||"1rem"},children:[e.jsx("span",{className:"font-bold",children:"약관 전체 동의"}),e.jsx("button",{onClick:()=>{const e=!Object.values(Y).every(e=>e);K({privacy:e,terms:e,marketing:e,thirdParty:e}),Q&&X("")},className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors "+(Object.values(Y).every(e=>e)?"bg-blue-500 border-blue-500 text-white":"border-gray-300"),children:Object.values(Y).every(e=>e)&&e.jsx(d,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",style:{gap:(null==(W=t.policyStyle)?void 0:W.itemGap)||"1rem"},children:[(null==(H=t.policyConfig)?void 0:H.showPrivacy)&&e.jsx(h,{label:"[필수] 개인정보 수집 및 이용 동의",checked:Y.privacy,onChange:()=>le("privacy"),hideBg:ae||a,fontSize:null==(M=t.policyStyle)?void 0:M.itemFontSize}),(null==(E=t.policyConfig)?void 0:E.showTerms)&&e.jsx(h,{label:"[필수] 이용약관 동의",checked:Y.terms,onChange:()=>le("terms"),hideBg:ae||a,fontSize:null==(L=t.policyStyle)?void 0:L.itemFontSize}),(null==(q=t.policyConfig)?void 0:q.showMarketing)&&e.jsx(h,{label:"[선택] 마케팅 정보 수신 동의",checked:Y.marketing,onChange:()=>le("marketing"),hideBg:ae||a,fontSize:null==(D=t.policyStyle)?void 0:D.itemFontSize}),(null==(R=t.policyConfig)?void 0:R.showThirdParty)&&e.jsx(h,{label:"[선택] 제3자 정보 제공 동의",checked:Y.thirdParty,onChange:()=>le("thirdParty"),hideBg:ae||a,fontSize:null==(A=t.policyStyle)?void 0:A.itemFontSize})]})]}),Q&&e.jsx("p",{className:"text-red-500 text-center mb-4 text-sm font-medium animate-pulse",children:Q})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 z-50 safe-area-bottom",children:e.jsxs("div",{className:"max-w-md mx-auto flex gap-3 "+("left"===(null==(_=t.buttonStyle)?void 0:_.alignment)?"justify-start":"right"===(null==(G=t.buttonStyle)?void 0:G.alignment)?"justify-end":"justify-center"),children:[!1!==t.showPrevButton&&o&&e.jsx("button",{onClick:o,className:"px-6 py-4 rounded-xl font-bold transition-all shrink-0 "+(ae||a?"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t.prevButtonText||"이전"}),e.jsx("button",{onClick:async()=>{var e,o;if(X(""),(()=>{const e={};return p.forEach(t=>{t.required&&!v[t.id]&&(e[t.id]="필수 항목을 입력해주세요.")}),J(e),0===Object.keys(e).length})())if(!(null==(e=t.policyConfig)?void 0:e.showPrivacy)||Y.privacy)if(!(null==(o=t.policyConfig)?void 0:o.showTerms)||Y.terms){ee(!0);try{await n(v)}finally{ee(!1)}}else X("이용약관에 동의해주세요.");else X("개인정보 수집 및 이용에 동의해주세요.")},disabled:Z,style:{...ne,fontFamily:ie.fontFamily,width:"full"===ie.width?"100%":"xs"===ie.width?"128px":"sm"===ie.width?"192px":"md"===ie.width?"256px":"lg"===ie.width?"320px":"xl"===ie.width?"384px":"auto"===ie.width?"auto":void 0,flex:"full"!==ie.width&&ie.width?"none":"1"},className:"py-4 font-bold shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2 "+((null==(U=t.buttonStyle)?void 0:U.animation)&&"none"!==t.buttonStyle.animation?`animate-btn-${t.buttonStyle.animation}`:""),children:Z?"처리중...":t.buttonText||"신청완료"})]})}),e.jsx("div",{className:"h-24"})]})},h=({label:t,checked:o,onChange:l,hideBg:i,fontSize:n})=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:l,children:[e.jsx("span",{className:"text-sm "+(i?"text-gray-300":"text-gray-600"),style:{fontSize:n||"0.875rem"},children:t}),e.jsx("div",{className:"w-5 h-5 rounded border flex items-center justify-center transition-colors "+(o?"bg-blue-500 border-blue-500 text-white":i?"border-white/30":"border-gray-300"),children:o&&e.jsx(d,{className:"w-3 h-3"})})]}),x=({currentStep:o,totalSteps:l})=>{const i=Math.min(100,Math.round((o+1)/l*100));return e.jsx("div",{className:"w-full fixed top-0 left-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500",children:"진행률"}),e.jsxs("span",{className:"text-xs font-bold text-brand-600",children:[i,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx(t.div,{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600",initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"}})})]})})},f=({config:i,onSubmit:n,utmParams:r})=>{var a,d,c,h;const f=i.steps&&i.steps.length>0,[v,y]=l.useState("hero"),[p,w]=l.useState(0),[j,k]=l.useState(0),[C,S]=l.useState(0),[N,B]=l.useState({}),[z,T]=l.useState(!1),P=!i.id||i.id.startsWith("preview_"),$=async(e={})=>{const t={...N,...e};if(B(t),i.steps&&C<i.steps.length-1)S(e=>e+1),window.scrollTo(0,0);else{if(P)return void alert("✅ 미리보기 모드\n\n실제 배포 시 여기서 폼이 제출됩니다.\n에디터로 돌아가서 계속 편집하세요.");const e={timestamp:(new Date).toISOString(),landing_id:i.id,name:t.name||"Anonymous",phone:t.phone||"",user_agent:navigator.userAgent,referrer:document.referrer,...r,...t};await n(e),s(i.pixelConfig),T(!0)}},I=()=>{C>0&&(S(e=>e-1),window.scrollTo(0,0))};if("success"===v||z)return e.jsx("div",{className:"min-h-screen bg-white font-sans",children:e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"min-h-screen flex flex-col items-center justify-center p-6 text-center bg-white",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(t.div,{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1},children:e.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"제출이 완료되었습니다!"}),e.jsxs("p",{className:"text-gray-600 max-w-sm mb-8",children:["담당자가 내용을 확인 후 빠르게 연락드리겠습니다.",e.jsx("br",{}),"감사합니다."]}),e.jsx("button",{onClick:()=>{T(!1),S(0),B({}),window.scrollTo(0,0)},className:"text-sm text-gray-500 underline hover:text-gray-800 transition-colors",children:"다시 입력 하기"})]},"success")});if(f&&i.steps){const l=i.steps[C],n="intro"===l.type,r=l.contentId?null==(a=i.detailContent)?void 0:a.find(e=>e.id===l.contentId):void 0,s=i.steps.find(e=>"intro"===e.type),f=s?{backgroundColor:s.backgroundColor,backgroundImage:s.backgroundImage,backgroundOverlay:s.backgroundOverlay,hideMobileBackground:s.hideMobileBackground}:void 0,v=null==s?void 0:s.titleStyle,y=null==s?void 0:s.subtitleStyle,p=null==s?void 0:s.buttonStyle,w=(null==s?void 0:s.contentId)?null==(d=i.detailContent)?void 0:d.find(e=>e.id===s.contentId):void 0,j=null==s?void 0:s.maxWidth,k=(i.formConfig.fields||[]).filter(e=>(l.fieldIds||[]).includes(e.id)),S="intro"!==l.type&&"outro"!==l.type||!l.insertedContentId||null==(c=i.detailContent)?void 0:c.find(e=>e.id===l.insertedContentId),z={formData:N,onDataChange:(e,t)=>B(o=>({...o,[e]:t})),formConfig:i.formConfig,primaryColor:i.theme.primaryColor,maxWidth:l.maxWidth||j,buttonStyle:l.buttonStyle||p,titleStyle:l.titleStyle||v,subtitleStyle:l.subtitleStyle||y,formStyle:l.formStyle,mediaStyles:l.mediaStyles};return e.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:[!n&&e.jsx(x,{currentStep:C,totalSteps:i.steps.length}),e.jsx(o,{mode:"wait",children:e.jsxs(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-screen",children:["intro"===l.type&&e.jsx(u,{...z,heroConfig:{...i.hero,headline:l.title||i.hero.headline,ctaText:l.buttonText||i.hero.ctaText,features:l.features||i.hero.features},onStart:()=>$(),backgroundContent:r,insertedContent:S,hideTitle:l.hideTitle,backgroundColor:l.backgroundColor,backgroundImage:l.backgroundImage,backgroundOverlay:l.backgroundOverlay,embeddedFields:k,hideMobileBackground:l.hideMobileBackground,fieldOverrides:l.fieldOverrides,questionContainerStyle:l.questionContainerStyle}),"content"===l.type&&e.jsx(g,{...z,content:(null==(h=i.detailContent)?void 0:h.find(e=>e.id===l.contentId))||{id:"fallback",type:"image",content:""},onNext:()=>$(),nextButtonText:l.buttonText,onPrev:I,showPrevButton:l.showPrevButton,prevButtonText:l.prevButtonText,backgroundContent:w,backgroundColor:null==f?void 0:f.backgroundColor,backgroundImage:null==f?void 0:f.backgroundImage,backgroundOverlay:null==f?void 0:f.backgroundOverlay,embeddedFields:k,hideMobileBackground:null==f?void 0:f.hideMobileBackground,fieldOverrides:l.fieldOverrides}),"form"===l.type&&e.jsx(m,{...z,formConfig:{...i.formConfig,title:l.title||i.formConfig.title,fields:k},onSubmit:e=>$(e),onProgressUpdate:()=>{},finalButtonText:l.buttonText,onPrev:I,showPrevButton:l.showPrevButton,prevButtonText:l.prevButtonText,backgroundContent:w,backgroundColor:null==f?void 0:f.backgroundColor,backgroundImage:null==f?void 0:f.backgroundImage,backgroundOverlay:null==f?void 0:f.backgroundOverlay,hideMobileBackground:null==f?void 0:f.hideMobileBackground,fieldOverrides:l.fieldOverrides,topContent:l.topContent}),"outro"===l.type&&e.jsx(b,{...z,step:l,onPrev:I,onSubmit:$,backgroundContent:r||w,insertedContent:S,backgroundColor:l.backgroundColor||(null==f?void 0:f.backgroundColor),backgroundImage:l.backgroundImage||(null==f?void 0:f.backgroundImage),backgroundOverlay:l.backgroundOverlay??(null==f?void 0:f.backgroundOverlay),embeddedFields:k,hideMobileBackground:l.hideMobileBackground??(null==f?void 0:f.hideMobileBackground),hideTitle:l.hideTitle,fieldOverrides:l.fieldOverrides})]},l.id)})]})}return e.jsx("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:e.jsxs(o,{mode:"wait",children:["hero"===v&&e.jsx(t.div,{exit:{opacity:0,y:-50},transition:{duration:.5},children:e.jsx(u,{heroConfig:i.hero,onStart:()=>{y("form")},primaryColor:i.theme.primaryColor})},"hero"),"form"===v&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col",children:[e.jsx(x,{currentStep:p,totalSteps:j}),e.jsx(m,{formConfig:i.formConfig,onSubmit:async e=>{const t={timestamp:(new Date).toISOString(),landing_id:i.id,name:e.name||"Anonymous",phone:e.phone||"",user_agent:navigator.userAgent,referrer:document.referrer,...r,...e};await n(t),s(i.pixelConfig),y("success")},onProgressUpdate:(e,t)=>{w(e),k(t)}})]},"form")]})})};export{f as default};
