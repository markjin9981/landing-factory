import{c as h,r as x,j as e,C as v,L as i,a as w,_ as k,b as C,f as S}from"./index-DmvbGWIp.js";import{R as L}from"./refresh-cw-MUQxYe3N.js";import{D as y,E as _}from"./external-link-CzJCL5nA.js";import{G as f,P as A}from"./plus-WdOY0daO.js";import{T as O}from"./trash-2-CXrO6-tF.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=h("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=h("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=h("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=h("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=h("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=h("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),B=({id:l,expectedTitle:p})=>{const[u,d]=x.useState("loading"),[c,m]=x.useState(""),b=async()=>{d("loading");try{const s=Date.now(),r=`/${l}/index.html?t=${s}`;console.log(`[Badge] Checking ${r}`);const n=await fetch(r,{method:"GET"});if(n.status===404){console.warn(`[Badge] ${l}: 404 Not Found`),d("pending"),m("404 Not Found (File not generated yet)");return}const t=await n.text();console.log(`[Badge] ${l} Content Preview:`,t.substring(0,200));const a=t.includes("<title>Landing Page Factory</title>"),o=t.includes(p),g=t.includes('property="og:title"');console.log(`[Badge] ${l} Analysis:`,{isGeneric:a,hasSpecificTitle:o,hasOgTag:g,expected:p}),o&&g?d("success"):a?(d("pending"),m("Generic Title Found (Serving App Shell)")):(d("pending"),m("Content Mismatch (Old version cached?)"))}catch(s){console.error(`[Badge] ${l} Error:`,s),d("error"),m(s.message)}};return x.useEffect(()=>{b()},[l,p]),u==="loading"?e.jsx("div",{className:"p-2",children:e.jsx(L,{className:"w-4 h-4 text-gray-400 animate-spin"})}):u==="success"?e.jsxs("div",{className:"flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded text-xs border border-green-200",title:"SNS 공유 미리보기가 준비되었습니다.",children:[e.jsx(E,{className:"w-3 h-3"}),e.jsx("span",{children:"공유 준비완료"})]}):u==="pending"?e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 bg-gray-100 px-2 py-1 rounded text-xs border border-gray-200 cursor-pointer hover:bg-gray-200 transition-colors",title:`클릭하여 다시 확인
디버그 정보: ${c}
(서버 반영에 최대 15분 소요)`,onClick:b,children:[e.jsx(v,{className:"w-3 h-3"}),e.jsx("span",{children:"배포 대기중"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-500 bg-red-50 px-2 py-1 rounded text-xs border border-red-200 cursor-pointer",title:`에러 발생: ${c}`,onClick:b,children:[e.jsx(I,{className:"w-3 h-3"}),e.jsx("span",{children:"확인 불가"})]})},N=C,z=()=>{const[l,p]=x.useState([]),[u,d]=x.useState(!0),[c,m]=x.useState("newest");x.useEffect(()=>{(async()=>{const r=new Map;Object.values(N).forEach(t=>r.set(t.id,t));try{(await S()).forEach(a=>r.set(a.id,a))}catch(t){console.error("Failed to load remote configs",t)}try{const t=localStorage.getItem("landing_drafts");if(t){const a=JSON.parse(t);Object.values(a).forEach(o=>{r.set(o.id,o)})}}catch(t){console.error("Failed to load drafts",t)}const n=Array.from(r.values()).sort((t,a)=>{const o=Number(t.id),g=Number(a.id);return!isNaN(o)&&!isNaN(g)?c==="newest"?g-o:o-g:c==="newest"?a.id.localeCompare(t.id):t.id.localeCompare(a.id)});p(n),d(!1)})()},[c]);const b=s=>{const r=localStorage.getItem("landing_drafts")&&JSON.parse(localStorage.getItem("landing_drafts")||"{}")[s],n=N[s];return r?e.jsxs("span",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded-full border border-orange-100 flex items-center",children:[e.jsx(j,{className:"w-3 h-3 mr-1"})," 작성 중 (Draft)"]}):n?e.jsxs("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full border border-gray-200 flex items-center",children:[e.jsx(y,{className:"w-3 h-3 mr-1"})," 기본 (System)"]}):e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full border border-blue-100 flex items-center",children:[e.jsx(f,{className:"w-3 h-3 mr-1"})," 배포됨 (Live)"]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900 font-sans",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-8 py-5 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-xl font-bold",children:"Landing Factory Admin"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(i,{to:"/",className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"사이트 홈으로"}),e.jsx(i,{to:"/admin/settings",className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"설정",children:e.jsx(F,{className:"w-5 h-5"})})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs(i,{to:"/admin/stats",className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-blue-400 transition-colors flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-lg",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"DB 수집 내역"}),e.jsx("p",{className:"text-xs text-gray-500",children:"신청된 고객 정보 확인"})]})]}),e.jsxs(i,{to:"/admin/traffic-stats",className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-blue-400 transition-colors flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-lg",children:e.jsx($,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"접속 통계"}),e.jsx("p",{className:"text-xs text-gray-500",children:"일별 방문자 및 전환율"})]})]}),e.jsxs(i,{to:"/admin/traffic-logs",className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-blue-400 transition-colors flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 text-orange-600 rounded-lg",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"유입 경로"}),e.jsx("p",{className:"text-xs text-gray-500",children:"상세 접속 로그 및 IP"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-end mb-4 border-b pb-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",children:"보유 중인 랜딩페이지"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Google Sheets와 연동된 모든 랜딩페이지 목록입니다."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-lg",children:[e.jsx("span",{className:"font-bold",children:"정렬:"}),e.jsxs("select",{value:c,onChange:s=>m(s.target.value),className:"bg-transparent border-none outline-none text-gray-800 font-medium cursor-pointer",children:[e.jsx("option",{value:"newest",children:"최신순 (Newest)"}),e.jsx("option",{value:"oldest",children:"오래된순 (Oldest)"})]})]})]})]}),e.jsxs(i,{to:"/admin/editor",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-bold shadow-md",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"새 페이지 만들기"]})]}),u?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(w,{className:"w-8 h-8 text-blue-600 animate-spin"})}):e.jsxs("div",{className:"grid gap-6",children:[l.map(s=>{var r;return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold",children:["/",s.id]}),b(s.id),e.jsx(B,{id:s.id,expectedTitle:s.title||((r=s.hero)==null?void 0:r.headline)||""})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:s.title||"(제목 없음)"}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:s.hero.headline||"(헤드라인 없음)"})]}),e.jsxs("div",{className:"flex items-center gap-3 border-t md:border-t-0 pt-4 md:pt-0",children:[e.jsx("button",{onClick:async()=>{confirm(`정말 '${s.title}' 페이지를 삭제하시겠습니까?

삭제 후에는 복구할 수 없습니다.`)&&(await k(()=>import("./index-DmvbGWIp.js").then(t=>t.F),[]).then(t=>t.deleteLandingConfig(s.id))?(alert("삭제되었습니다."),window.location.reload()):alert("삭제에 실패했습니다."))},className:"flex items-center justify-center w-10 h-10 border border-red-200 bg-red-50 rounded-lg text-red-600 hover:bg-red-100 transition-colors",title:"페이지 삭제",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>{const n=`${window.location.origin}/${s.id}`;navigator.clipboard.writeText(n),alert(`배포 주소가 복사되었습니다.
`+n)},className:"flex items-center justify-center px-4 py-2 border border-blue-200 bg-blue-50 rounded-lg text-sm font-medium text-blue-700 hover:bg-blue-100 transition-colors",title:"배포 링크 복사",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"링크 복사"]}),e.jsxs(i,{to:`/${s.id}`,target:"_blank",className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"미리보기"]}),e.jsxs(i,{to:`/admin/editor/${s.id}`,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"수정하기"]})]})]},s.id)}),l.length===0&&e.jsx("div",{className:"text-center py-20 bg-gray-100 rounded-xl border-dashed border-2 border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"생성된 랜딩페이지가 없습니다."})})]})]})]})};export{z as default};
