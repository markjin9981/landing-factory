import{j as e}from"./animation-BOIIKJnC.js";import{r as c}from"./vendor-B_BVtOF2.js";import{c as B,w as H,a3 as f,K as Z,F as z,e as Q}from"./index-BSNkTH52.js";import{u as o,w as V,r as W}from"./xlsx-CKN5doRT.js";import{R as M}from"./refresh-cw-CCP3gUvb.js";import{S as X}from"./save-BKPSef5X.js";import{P as ee}from"./plus-RHGIG7uC.js";import{T as se}from"./trash-2-Dnhy1FoY.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=B("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),xe=()=>{const[N,y]=c.useState(null),[P,v]=c.useState(!0),[w,S]=c.useState(!1),[t,h]=c.useState(null),[R,u]=c.useState(!1),[l,i]=c.useState({name:"",allow24Months:!1,spousePropertyRate:.5,investLossInclude:!1,description:""});c.useEffect(()=>{E()},[]);const E=async()=>{v(!0);const s=await H();if(s){y(s);const a=s.policyConfig||f;h(JSON.parse(JSON.stringify(a)))}else h(JSON.parse(JSON.stringify(f)));v(!1)},G=s=>{var C;const a=(C=s.target.files)==null?void 0:C[0];if(!a)return;const d=new FileReader;d.onload=U=>{var O;const K=(O=U.target)==null?void 0:O.result,p=W(K,{type:"binary"}),b={Seoul:"서울특별시",Overcrowded:"과밀억제권역",Metro:"광역시기준",Others:"그외"},Y=p.SheetNames[0],$=p.Sheets[Y],q=o.sheet_to_json($),_={},k={};let L=0;q.forEach(n=>{const x=n.지역명||n.Region,j=n.관할법원||n.Court;let r=n.지역그룹||n.Group;r&&b[r]&&(r=b[r]),x&&j&&(_[x]=j,L++),x&&r&&(k[x]=r)});let g={...f.depositExemptions};if(p.SheetNames.length>1){const n=p.SheetNames[1],x=p.Sheets[n];o.sheet_to_json(x).forEach(r=>{let m=r.지역그룹||r.Group;m&&b[m]&&(m=b[m]);const T=r.보증금상한||r.Limit,I=r.공제금액||r.Deduct;m&&T!==void 0&&I!==void 0&&(g[m]={limit:Number(T),deduct:Number(I)})})}if(Object.keys(b).forEach(n=>{delete g[n]}),t){const n={...t,regionToCourtMap:_,regionToGroupMap:k,depositExemptions:g};h(n),alert(`파일 로드 완료!
- 지역 매핑: ${L}건
- 정책 설정을 저장해야 적용됩니다.`)}},d.readAsBinaryString(a)},D=async()=>{if(!N||!t)return;S(!0);const s={...N,policyConfig:t};await Q(s)?(y(s),alert("정책 설정이 저장되었습니다.")):alert("저장에 실패했습니다."),S(!1)},F=()=>{const s=o.json_to_sheet([{지역명:"서울",관할법원:"서울회생법원",지역그룹:"서울특별시"},{지역명:"용인",관할법원:"수원회생법원",지역그룹:"과밀억제권역"},{지역명:"부산",관할법원:"부산회생법원",지역그룹:"광역시기준"}]),a=o.json_to_sheet([{지역그룹:"서울특별시",보증금상한:17e7,공제금액:57e6},{지역그룹:"과밀억제권역",보증금상한:15e7,공제금액:5e7},{지역그룹:"광역시기준",보증금상한:88e6,공제금액:29e6},{지역그룹:"그외",보증금상한:78e6,공제금액:26e6}]),d=o.book_new();o.book_append_sheet(d,s,"법원매핑"),o.book_append_sheet(d,a,"보증금공제"),V(d,"정책설정_템플릿.xlsx")},A=s=>{if(!t||!confirm(`정말 '${s}' 설정을 삭제하시겠습니까?`))return;const a={...t.courtTraits};delete a[s],h({...t,courtTraits:a})},J=()=>{if(!t||!l.name)return alert("법원명을 입력해주세요.");if(t.courtTraits[l.name])return alert("이미 존재하는 법원명입니다.");const s={name:l.name,allow24Months:l.allow24Months||!1,spousePropertyRate:l.spousePropertyRate||0,investLossInclude:l.investLossInclude||!1,description:l.description||""};h({...t,courtTraits:{...t.courtTraits,[s.name]:s}}),u(!1),i({name:"",allow24Months:!1,spousePropertyRate:.5,investLossInclude:!1,description:""})};return P?e.jsx("div",{className:"p-8 text-center flex justify-center",children:e.jsx(M,{className:"animate-spin"})}):e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"2026 개인회생 정책 관리"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:F,className:"px-4 py-2 border rounded bg-white hover:bg-gray-50 flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"w-4 h-4"})," 템플릿"]}),e.jsxs("button",{onClick:D,disabled:w,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 shadow-sm font-bold",children:[w?e.jsx(M,{className:"w-4 h-4 animate-spin"}):e.jsx(X,{className:"w-4 h-4"}),"설정 저장"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-purple-600"}),"법원별 성향 관리"]}),e.jsxs("button",{onClick:()=>u(!0),className:"text-sm bg-purple-50 text-purple-700 px-3 py-1.5 rounded-lg border border-purple-100 hover:bg-purple-100 flex items-center gap-1 font-bold",children:[e.jsx(ee,{className:"w-4 h-4"})," 법원 추가"]})]}),R&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-50 rounded-xl border border-purple-200",children:[e.jsx("h3",{className:"font-bold text-purple-800 mb-3 text-sm",children:"새 법원 추가"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"법원명"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>i({...l,name:s.target.value}),className:"w-full p-2 border rounded bg-white",placeholder:"예: 경기회생법원"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:l.description,onChange:s=>i({...l,description:s.target.value}),className:"w-full p-2 border rounded bg-white",placeholder:"예: 배우자 재산 50% 반영"})]})]}),e.jsxs("div",{className:"flex gap-6 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.allow24Months,onChange:s=>i({...l,allow24Months:s.target.checked})}),e.jsx("span",{className:"text-gray-700",children:"24개월 단축 가능"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.investLossInclude,onChange:s=>i({...l,investLossInclude:s.target.checked})}),e.jsx("span",{className:"text-gray-700",children:"투기성 손실 반영"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"배우자 재산 반영률:"}),e.jsxs("select",{value:l.spousePropertyRate,onChange:s=>i({...l,spousePropertyRate:Number(s.target.value)}),className:"p-1 border rounded bg-white text-sm",children:[e.jsx("option",{value:0,children:"0% (미반영)"}),e.jsx("option",{value:.5,children:"50% (절반)"}),e.jsx("option",{value:1,children:"100% (전체)"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-3 py-1.5 text-gray-500 hover:text-gray-700 text-sm",children:"취소"}),e.jsx("button",{onClick:J,className:"px-4 py-1.5 bg-purple-600 text-white rounded text-sm font-bold hover:bg-purple-700",children:"추가하기"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"법원명"}),e.jsx("th",{className:"p-3",children:"24개월"}),e.jsx("th",{className:"p-3",children:"배우자재산"}),e.jsx("th",{className:"p-3",children:"투기손실"}),e.jsx("th",{className:"p-3",children:"설명"}),e.jsx("th",{className:"p-3 text-right",children:"관리"})]})}),e.jsx("tbody",{children:t&&Object.entries(t.courtTraits).map(([s,a])=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 font-bold",children:a.name}),e.jsx("td",{className:"p-3",children:a.allow24Months?e.jsx("span",{className:"text-green-600 font-bold",children:"가능"}):e.jsx("span",{className:"text-gray-400",children:"불가"})}),e.jsxs("td",{className:"p-3",children:[a.spousePropertyRate*100,"%"]}),e.jsx("td",{className:"p-3",children:a.investLossInclude?e.jsx("span",{className:"text-red-500 font-bold",children:"반영"}):e.jsx("span",{className:"text-gray-400",children:"미반영"})}),e.jsx("td",{className:"p-3 text-gray-500 text-xs",children:a.description}),e.jsx("td",{className:"p-3 text-right",children:s!=="Default"?e.jsx("button",{onClick:()=>A(s),className:"text-red-400 hover:text-red-600 p-1 bg-red-50 rounded",title:"삭제",children:e.jsx(se,{className:"w-4 h-4"})}):e.jsx("span",{className:"text-xs text-gray-300",children:"기본"})})]},s))})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-green-600"}),"엑셀 파일 업로드"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 p-4 bg-green-50 rounded-lg border border-dashed border-green-300",children:[e.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:G,className:`block w-full text-sm text-gray-500
                                file:mr-4 file:py-2 file:px-4
                                file:rounded-full file:border-0
                                file:text-sm file:font-semibold
                                file:bg-green-100 file:text-green-700
                                hover:file:bg-green-200`}),e.jsx("div",{className:"text-xs text-gray-500",children:"* 법원 매핑 및 보증금 기준이 포함된 엑셀 파일을 업로드하세요."})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-bold text-gray-700 mb-3 text-sm",children:"지역 → 관할 법원 매핑 (미리보기)"}),e.jsx("div",{className:"h-64 overflow-y-auto border rounded text-sm relative bg-gray-50",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border-b",children:"지역명"}),e.jsx("th",{className:"p-2 border-b",children:"관할법원"}),e.jsx("th",{className:"p-2 border-b",children:"지역그룹"})]})}),e.jsx("tbody",{children:t&&Object.entries(t.regionToCourtMap).map(([s,a])=>e.jsxs("tr",{className:"border-b hover:bg-white",children:[e.jsx("td",{className:"p-2 font-medium",children:s}),e.jsx("td",{className:"p-2 text-blue-600",children:a}),e.jsx("td",{className:"p-2 text-gray-500",children:t.regionToGroupMap[s]||"-"})]},s))})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:"보증금 공제 기준 (2026)"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border-b text-left",children:"그룹"}),e.jsx("th",{className:"p-2 border-b text-right",children:"상한"}),e.jsx("th",{className:"p-2 border-b text-right",children:"공제"})]})}),e.jsx("tbody",{children:t&&Object.entries(t.depositExemptions).filter(([s])=>!["Seoul","Overcrowded","Metro","Others"].includes(s)).map(([s,a])=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-medium text-xs",children:s}),e.jsxs("td",{className:"p-2 text-right text-xs",children:[(a.limit/1e4).toLocaleString(),"만"]}),e.jsxs("td",{className:"p-2 text-right font-bold text-blue-600",children:[(a.deduct/1e4).toLocaleString(),"만"]})]},s))})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"* 단위: 만원"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:"기본 정책 설정"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsx("span",{className:"text-gray-500",children:"기준 연도"}),e.jsx("span",{className:"font-medium",children:t==null?void 0:t.baseYear})]}),e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsx("span",{className:"text-gray-500",children:"생계비 인정률"}),e.jsxs("span",{className:"font-medium",children:[((t==null?void 0:t.livingCostRate)||0)*100,"%"]})]}),e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsx("span",{className:"text-gray-500",children:"중위 소득 (1인)"}),e.jsxs("span",{className:"font-medium",children:[t==null?void 0:t.medianIncome[1].toLocaleString(),"원"]})]})]})]})]})]})]})};export{xe as default};
