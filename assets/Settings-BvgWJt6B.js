import{c as d,d as U,r as a,q as u,t as C,v as L,j as e,w as y,e as E,x as M,y as G,z as $}from"./index-DIvq7NuB.js";import{A as I}from"./arrow-left-B5qq4Ivo.js";import{P,G as T}from"./plus-D8aZmDKH.js";import{U as q,L as z}from"./user-BoklaVxs.js";import{T as R}from"./trash-2-CACa2gNG.js";import{S as _,M as F}from"./smartphone-IxVhhxk_.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=d("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=d("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=d("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),X=()=>{const p=U(),[c,j]=a.useState([]),[f,o]=a.useState(!1),N=u.getSessionId(),r=u.getUserEmail(),[x,v]=a.useState([]),[w,m]=a.useState(!1),[l,g]=a.useState(""),[h,b]=a.useState(!1);a.useEffect(()=>{i(),n()},[]);const n=async()=>{m(!0);const s=await C();v(s),m(!1)},S=async s=>{s.preventDefault(),l&&confirm(`${l} 님을 관리자로 추가하시겠습니까?`)&&(b(!0),await M(l),setTimeout(async()=>{await n(),b(!1),g(""),alert("초대 요청을 보냈습니다. (잠시 후 목록에 나타나지 않으면 권한 설정을 확인하세요)")},1500))},k=async s=>{confirm(`${s} 님의 관리자 권한을 삭제하시겠습니까?`)&&(await G(s),setTimeout(()=>{n(),alert("삭제 요청을 보냈습니다.")},1e3))},i=async()=>{o(!0);const s=await L();j(s),o(!1)},A=async s=>{if(!confirm("정말로 이 기기를 로그아웃 시키겠습니까?"))return;await $(s)?(alert("로그아웃 처리되었습니다."),i()):alert("처리에 실패했습니다.")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans pb-20",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-8 py-5 flex items-center justify-between sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>p("/admin"),className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(I,{className:"w-5 h-5 text-gray-600"})}),e.jsx("h1",{className:"text-xl font-bold",children:"마이페이지 (설정)"})]})}),e.jsxs("main",{className:"max-w-2xl mx-auto p-8 space-y-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-8",children:[e.jsxs("h2",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600"}),"관리자 계정 정보"]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8 text-sm text-blue-800",children:[e.jsx("strong",{className:"block mb-1",children:"Google 계정 연동됨"}),"현재 ",e.jsx("strong",{children:"Google Sign-In"}),"을 통해 로그인되어 있습니다.",e.jsx("br",{}),"비밀번호나 계정 정보 변경은 구글 계정 설정에서 가능합니다."]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"현재 로그인된 이메일"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:r||"알 수 없음",readOnly:!0,className:"w-full pl-10 px-4 py-3 rounded-lg border border-gray-300 bg-gray-100 text-gray-600 outline-none"})]})]})})]}),r==="beanhull@gmail.com"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-8",children:[e.jsxs("h2",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600"}),"관리자 권한 관리"]}),e.jsx("div",{className:"mb-6",children:e.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[e.jsx("input",{type:"email",placeholder:"추가할 관리자의 Gmail 입력",value:l,onChange:s=>g(s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none",required:!0}),e.jsx("button",{type:"submit",disabled:h,className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-purple-700 disabled:opacity-50 flex items-center",children:h?"추가 중...":e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-1"})," 추가"]})})]})}),e.jsx("div",{className:"space-y-3",children:w?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"목록 불러오는 중..."}):x.length===0?e.jsx("p",{className:"text-gray-400 text-center py-4",children:"등록된 관리자가 없습니다. (오류)"}):x.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-full border border-gray-200",children:e.jsx(q,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800 text-sm",children:s.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.name," ",s.memo?`(${s.memo})`:""]})]})]}),s.email!==r&&e.jsx("button",{onClick:()=>k(s.email),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"권한 삭제",children:e.jsx(R,{className:"w-4 h-4"})}),s.email===r&&e.jsx("span",{className:"text-xs text-blue-600 font-bold bg-blue-50 px-2 py-1 rounded",children:"본인"})]},t))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),"기기 접속 현황"]}),e.jsx("button",{onClick:i,className:"text-sm text-gray-500 hover:text-gray-900 underline",children:"새로고침"})]}),e.jsx("div",{className:"space-y-4",children:f?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"활동 기록을 불러오는 중..."}):c.length===0?e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg text-gray-500 text-sm",children:[e.jsx(E,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),"기록된 로그인 활동이 없습니다."]}):c.map(s=>{const t=s.session_id===N;return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${t?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${t?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:s.device.toLowerCase().includes("phone")||s.device.toLowerCase().includes("mobile")?e.jsx(_,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-900 text-sm flex items-center gap-2",children:[s.device,t&&e.jsx("span",{className:"bg-blue-600 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:"현재 기기"})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2 mt-0.5",children:[e.jsx(T,{className:"w-3 h-3"})," ",s.ip,e.jsx("span",{className:"text-gray-300",children:"|"}),s.timestamp]})]})]}),!t&&e.jsxs("button",{onClick:()=>A(s.session_id),className:"text-xs bg-white border border-gray-300 text-gray-700 px-3 py-1.5 rounded hover:bg-gray-50 hover:text-red-600 hover:border-red-200 transition-colors flex items-center",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"로그아웃"]})]},s.session_id)})})]})]}):e.jsxs("div",{className:"bg-gray-100 border border-gray-200 rounded-xl p-8 text-center text-gray-500",children:[e.jsx(y,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-700",children:"관리자 권한 제한"}),e.jsxs("p",{className:"text-sm mt-1",children:["관리자 추가/삭제 및 기기 관리는",e.jsx("br",{}),e.jsx("strong",{children:"최고 관리자(beanhull@gmail.com)"}),"만 가능합니다."]})]})]})]})};export{X as default};
