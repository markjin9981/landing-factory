import{j as e,a1 as ve,r as T,R as ae,a2 as V,a3 as se,a4 as re,a5 as Ne,g as je}from"./index-DqBg55in.js";const ie=({fields:a,formData:W,onChange:L,errors:o,formStyle:i,primaryColor:O="#3b82f6",fieldOverrides:f={}})=>{const I=(i==null?void 0:i.containerLayout)||"standard",c=(i==null?void 0:i.containerGap)||(I==="inline"?"0.5rem":I==="compact"?"0.75rem":"1.5rem"),t=["w-full overflow-y-auto",I==="inline"?"flex flex-wrap items-end":"space-y-4"].filter(Boolean).join(" ");return e.jsx("div",{className:t,style:{backgroundColor:i==null?void 0:i.containerBgColor,opacity:i!=null&&i.containerBgOpacity?i.containerBgOpacity/100:1,maxHeight:i==null?void 0:i.containerMaxHeight,borderColor:i==null?void 0:i.containerBorderColor,borderRadius:i==null?void 0:i.containerBorderRadius,padding:i==null?void 0:i.containerPadding,gap:c},children:a.map(m=>{const h=f[m.id],P={...m,label:(h==null?void 0:h.label)??m.label,type:(h==null?void 0:h.type)??m.type,required:(h==null?void 0:h.required)??m.required,placeholder:(h==null?void 0:h.placeholder)??m.placeholder,options:(h==null?void 0:h.options)??m.options};return e.jsx(ve,{field:P,value:W[P.id],onChange:R=>L(P.id,R),error:o[P.id],formStyle:i,primaryColor:O,layout:I},P.id)})})},fe=({heroConfig:a,onStart:W,primaryColor:L,buttonStyle:o,backgroundContent:i,insertedContent:O,hideTitle:f,backgroundColor:I,backgroundImage:c,backgroundOverlay:t,maxWidth:m,titleStyle:h,subtitleStyle:P,formData:R={},onDataChange:U=()=>{},embeddedFields:M=[],formStyle:b,mediaStyles:w,hideMobileBackground:v=!1,fieldOverrides:d,questionContainerStyle:s})=>{const[Q,K]=T.useState({}),[p,_]=T.useState(!1);ae.useEffect(()=>{const n=()=>_(window.innerWidth<768);return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const r=()=>{const n={};return M.forEach(B=>{B.required&&!R[B.id]&&(n[B.id]="필수 항목을 입력해주세요.")}),K(n),Object.keys(n).length===0},H=()=>{r()&&W(R)},$=I||c,u=(t??60)/100,G=((n,B,Y="to right")=>{if(!n||!B)return{};const k=Y.replace("to-","to ").replace("-"," ");return{backgroundImage:`linear-gradient(${k.includes("to")?k:"to right"}, ${n}, ${B})`}})(o==null?void 0:o.gradientFrom,o==null?void 0:o.gradientTo,o==null?void 0:o.gradientDirection),j={backgroundColor:(o==null?void 0:o.backgroundColor)||L,color:(o==null?void 0:o.textColor)||"#ffffff",fontSize:o==null?void 0:o.fontSize,borderRadius:o==null?void 0:o.borderRadius,fontFamily:o==null?void 0:o.fontFamily,fontWeight:o==null?void 0:o.fontWeight,...G},D=h!=null&&h.gradientFrom&&(h!=null&&h.gradientTo)?{backgroundImage:`linear-gradient(to right, ${h.gradientFrom}, ${h.gradientTo})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"}:{};return e.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden text-white flex flex-col justify-center items-center px-6 text-center",style:{backgroundColor:I||void 0,backgroundImage:c?`url(${c})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[$&&(!p||!v)&&e.jsx("div",{className:"absolute inset-0 bg-black z-0",style:{opacity:u}}),!$&&i&&(!p||!v)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:i.type==="image"||i.type==="banner"?i.content:i.type==="youtube"?`https://img.youtube.com/vi/${i.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:n=>{n.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),!$&&!i&&(!p||!v)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black z-0"}),e.jsx("div",{className:`relative z-10 w-full px-6 py-20 flex flex-col items-center justify-center min-h-screen ${p&&v?"!p-0":""}`,children:e.jsxs("div",{className:`w-full ${m?`max-w-${m}`:"max-w-lg"} flex flex-col items-center ${p&&v?"!w-full !max-w-none":""}`,children:[!f&&e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"inline-block mb-4 px-3 py-1 bg-white/10 backdrop-blur-md rounded-full border border-white/20",style:P,children:e.jsx("span",{className:"text-sm font-semibold tracking-wide",children:a.subHeadline||"무료 자가진단"})}),!f&&e.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-8",style:{...h,...D,textShadow:h!=null&&h.gradientFrom?"none":"0 0 40px rgba(59, 130, 246, 0.5)",whiteSpace:"pre-line"},children:a.headline}),O&&e.jsx(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.4},className:`w-full mb-10 rounded-2xl overflow-hidden shadow-2xl relative ${p&&v?"":"bg-black/20 border border-white/10"}`,children:e.jsx("div",{className:"mx-auto overflow-y-auto",style:{width:p?v?"100vw":(w==null?void 0:w.mobileWidth)||"100%":(w==null?void 0:w.pcWidth)||"100%",height:p?v?"auto":(w==null?void 0:w.mobileHeight)||"auto":(w==null?void 0:w.pcHeight)||"auto",maxHeight:p&&v?"80vh":p?"70vh":"60vh"},children:O.type==="video"?e.jsx("video",{src:O.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):e.jsx("img",{src:O.content,className:"w-full h-full object-contain",alt:"Hero Content"})})}),a.features&&a.features.length>0&&e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"w-full max-w-4xl mx-auto mb-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.features.map((n,B)=>e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-4 flex items-center shadow-lg text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-4 shrink-0 text-blue-600 text-xl",children:n.icon||"✅"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-lg leading-tight",children:n.text}),n.subText&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:n.subText})]})]},n.id||B))})}),M.length>0&&e.jsx(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:`w-full text-left mb-8 ${s!=null&&s.hideBackground?"":"backdrop-blur-md"}`,style:{backgroundColor:s!=null&&s.hideBackground?"transparent":(s==null?void 0:s.backgroundColor)||"rgba(255, 255, 255, 0.05)",borderRadius:(s==null?void 0:s.borderRadius)||"1rem",padding:p?(s==null?void 0:s.mobilePadding)||(s==null?void 0:s.padding)||"1rem":(s==null?void 0:s.padding)||"1.5rem",border:s!=null&&s.hideBackground?"none":`1px solid ${(s==null?void 0:s.borderColor)||"rgba(255, 255, 255, 0.1)"}`,maxWidth:p?(s==null?void 0:s.mobileMaxWidth)||(s==null?void 0:s.maxWidth)||"100%":(s==null?void 0:s.maxWidth)||"100%",margin:"0 auto"},children:e.jsx(ie,{fields:M,formData:R,onChange:U,errors:Q,formStyle:{...b,containerLayout:s==null?void 0:s.layout,containerGap:s==null?void 0:s.gap},primaryColor:L,fieldOverrides:d})}),e.jsxs(V.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:H,style:j,className:`group relative w-full max-w-xs mx-auto py-4 px-8 rounded-xl shadow-xl flex items-center justify-center gap-2 font-bold ${o!=null&&o.backgroundColor?"":"bg-gradient-to-r from-blue-600 to-blue-500 shadow-blue-500/30"} ${o!=null&&o.animation?`animate-btn-${o.animation}`:""}`,children:[e.jsx("span",{children:a.ctaText||"진단 시작하기"}),e.jsx(se,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsx("p",{className:"mt-6 text-gray-400 text-sm",children:"3분이면 충분합니다 • 100% 무료"})]})})]})},be=({formConfig:a,onSubmit:W,onProgressUpdate:L,finalButtonText:o,onPrev:i,showPrevButton:O,prevButtonText:f,buttonLayout:I="auto",buttonStyle:c,titleStyle:t,formStyle:m,primaryColor:h="#3b82f6",maxWidth:P,backgroundContent:R,backgroundColor:U,backgroundImage:M,backgroundOverlay:b,hideMobileBackground:w=!1,topContent:v,fieldOverrides:d})=>{const[s,Q]=T.useState(0),[K,p]=T.useState({}),[_,r]=T.useState({}),[H,$]=T.useState(!1),[u,l]=T.useState(!1);T.useEffect(()=>{const g=()=>l(window.innerWidth<768);return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const G=ae.useMemo(()=>{const g=[];let x=[];const E=a.fields||[],F=m==null?void 0:m.fieldsPerPage;if(F===0)return E.length>0?[E]:[];const q=F||2;return E.forEach(C=>{const y=C.type==="textarea"||C.type==="address",S=F||(y?1:q);(x.length>=S||y&&!F&&x.length>0)&&(x.length>0&&g.push(x),x=[]),x.push(C),y&&!F&&(g.push(x),x=[])}),x.length>0&&g.push(x),g},[a.fields,m==null?void 0:m.fieldsPerPage]);T.useEffect(()=>{L(s,G.length)},[s,G.length,L]);const j=(g,x)=>{p(E=>({...E,[g]:x})),_[g]&&r(E=>{const F={...E};return delete F[g],F})},D=()=>{const g=G[s],x={};let E=!0;return g.forEach(F=>{F.required&&!K[F.id]&&(x[F.id]="필수 항목입니다.",E=!1)}),r(x),E},n=async()=>{if(D())if(s<G.length-1)Q(g=>g+1),window.scrollTo(0,0);else{$(!0);try{await W(K)}finally{$(!1)}}},B=()=>{s>0?(Q(g=>g-1),window.scrollTo(0,0)):i&&O!==!1&&i()},Y=G[s]||[],k=(g,x,E="to right")=>{if(!g||!x)return{};const F=E.replace("to-","to ").replace("-"," ");return{backgroundImage:`linear-gradient(${F.includes("to")?F:"to right"}, ${g}, ${x})`}},J={backgroundColor:(c==null?void 0:c.backgroundColor)||h,color:(c==null?void 0:c.textColor)||"#ffffff",fontSize:(c==null?void 0:c.fontSize)||"1.125rem",borderRadius:(c==null?void 0:c.borderRadius)||"0.75rem",...k(c==null?void 0:c.gradientFrom,c==null?void 0:c.gradientTo,c==null?void 0:c.gradientDirection),...(c==null?void 0:c.animation)==="shimmer"?{"--btn-bg":(c==null?void 0:c.backgroundColor)||h,"--btn-shine":"rgba(255,255,255,0.4)"}:{}},z={color:(t==null?void 0:t.color)||(m==null?void 0:m.questionColor)||"#1f2937",fontSize:t==null?void 0:t.fontSize,fontWeight:(t==null?void 0:t.fontWeight)||"bold",textAlign:(t==null?void 0:t.textAlign)||"center",fontFamily:t==null?void 0:t.fontFamily,...t!=null&&t.gradientFrom&&(t!=null&&t.gradientTo)?{backgroundImage:`linear-gradient(to right, ${t.gradientFrom}, ${t.gradientTo})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"}:{}},A=U||M,Z=(b??60)/100;return e.jsxs("div",{className:`flex flex-col flex-1 min-h-screen relative overflow-hidden ${A||R?"text-white":"text-gray-900 bg-white"}`,style:{backgroundColor:U||(A?"transparent":"#ffffff"),backgroundImage:M?`url(${M})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[A&&(!u||!w)&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:Z}}),!A&&R&&(!u||!w)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:R.type==="image"||R.type==="banner"?R.content:R.type==="youtube"?`https://img.youtube.com/vi/${R.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:g=>{g.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:`flex-1 w-full ${P?`max-w-${P}`:"max-w-md"} mx-auto px-6 py-8 flex flex-col justify-center relative z-10`,children:[v&&e.jsxs("div",{className:"mb-6 w-full",children:[v.type==="image"&&e.jsx("img",{src:v.content,className:"w-full h-auto rounded-lg",alt:"Top Content"}),v.type==="video"&&e.jsx("video",{src:v.content,controls:!0,className:"w-full rounded-lg"}),v.type==="youtube"&&e.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden",children:e.jsx("iframe",{src:v.content,className:"w-full h-full",title:"Video",frameBorder:"0",allowFullScreen:!0})}),v.type==="text"&&e.jsx("div",{className:"prose max-w-none text-sm",dangerouslySetInnerHTML:{__html:v.content}})]}),a.title&&e.jsx(V.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",style:z,children:a.title}),e.jsx(re,{mode:"wait",children:e.jsx(V.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:Y.map(g=>{const x=d==null?void 0:d[g.id],E={...g,label:(x==null?void 0:x.label)??g.label,type:(x==null?void 0:x.type)??g.type,required:(x==null?void 0:x.required)??g.required,placeholder:(x==null?void 0:x.placeholder)??g.placeholder,options:(x==null?void 0:x.options)??g.options};return e.jsx(ve,{field:E,value:K[E.id],onChange:F=>j(E.id,F),error:_[E.id],formStyle:{...m,questionFont:m==null?void 0:m.questionFont},primaryColor:h},E.id)})},s)})]}),e.jsxs("div",{className:`mt-8 w-full max-w-md mx-auto p-6 flex items-stretch gap-3 ${I==="fixed_bottom"?"fixed bottom-0 left-0 right-0 bg-white border-t z-50 p-4 max-w-full":""}`,children:[(s>0||O!==!1&&i)&&e.jsx("button",{onClick:B,className:`bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors ${I==="asymmetric"?"w-16 flex items-center justify-center p-0":"px-6 py-4"}`,title:f||"이전",children:I==="asymmetric"?e.jsx(se,{className:"w-5 h-5 rotate-180"}):s>0?"이전":f||"이전"}),e.jsx("button",{onClick:n,disabled:H,style:J,className:`flex-1 py-4 shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2 font-bold ${c!=null&&c.animation?`animate-btn-${c.animation}`:""}`,children:H?"제출 중...":s===G.length-1?o||"결과 확인하기":e.jsxs(e.Fragment,{children:["다음 단계 ",e.jsx(se,{className:"w-5 h-5"})]})})]}),I==="fixed_bottom"&&e.jsx("div",{className:"h-24"})]})},ke=({content:a,onNext:W,nextButtonText:L,onPrev:o,showPrevButton:i,prevButtonText:O,buttonStyle:f,primaryColor:I="#3b82f6",backgroundContent:c,backgroundColor:t,backgroundImage:m,backgroundOverlay:h,maxWidth:P,titleStyle:R,subtitleStyle:U,formData:M={},onDataChange:b=()=>{},embeddedFields:w=[],formStyle:v,mediaStyles:d,hideMobileBackground:s=!1})=>{const[Q,K]=T.useState({}),[p,_]=T.useState(!1);ae.useEffect(()=>{const j=()=>_(window.innerWidth<768);return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const r=()=>{const j={};return w.forEach(D=>{D.required&&!M[D.id]&&(j[D.id]="필수 항목을 입력해주세요.")}),K(j),Object.keys(j).length===0},H=()=>{r()&&W(M)},$=()=>{var D,n,B,Y,k,J,z;const j={width:p?s?"100vw":(d==null?void 0:d.mobileWidth)||"100%":(d==null?void 0:d.pcWidth)||"100%",height:p?s?"auto":(d==null?void 0:d.mobileHeight)||"auto":(d==null?void 0:d.pcHeight)||"auto",maxHeight:p?s?"80vh":d!=null&&d.mobileHeight&&d.mobileHeight!=="auto"?"none":"70vh":d!=null&&d.pcHeight&&d.pcHeight!=="auto"?"none":"70vh",overflowY:"auto"};switch(a.type){case"image":return e.jsx("div",{className:"mx-auto",style:j,children:e.jsx("img",{src:a.content,className:"w-full h-auto rounded-lg shadow-sm",alt:"Content"})});case"video":return e.jsx("div",{className:"mx-auto",style:j,children:e.jsx("video",{src:a.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-auto rounded-lg shadow-sm"})});case"youtube":let A=a.content;return A.includes("v=")?A=A.split("v=")[1].split("&")[0]:A.includes("youtu.be/")&&(A=A.split("youtu.be/")[1]),e.jsx("div",{className:"mx-auto",style:j,children:e.jsx("div",{className:"relative w-full pt-[56.25%] rounded-lg overflow-hidden bg-black shadow-lg",children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${A}?autoplay=${a.autoPlay?1:0}&modestbranding=1&rel=0`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})});case"map":return e.jsx("div",{className:"mx-auto",style:j,children:e.jsxs("div",{className:"w-full h-[400px] rounded-lg overflow-hidden shadow-lg border border-gray-100",children:[e.jsx(Ne,{address:a.content,placeName:a.mapPlaceName}),e.jsx("div",{className:"bg-white p-3 text-sm text-gray-600 text-center border-t",children:a.mapPlaceName||"위치 정보"})]})});case"banner":return e.jsx("div",{className:"mx-auto",style:j,children:e.jsxs("div",{style:{height:((D=a.bannerStyle)==null?void 0:D.height)||"300px",backgroundColor:((n=a.bannerStyle)==null?void 0:n.backgroundColor)||"#f3f4f6",backgroundImage:(B=a.bannerStyle)!=null&&B.backgroundImage?`url(${a.bannerStyle.backgroundImage})`:void 0},className:"w-full flex items-center justify-center relative bg-cover bg-center rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:((Y=a.bannerStyle)==null?void 0:Y.overlayOpacity)||0}}),e.jsx("div",{className:"relative z-10 p-6 whitespace-pre-wrap",style:{color:((k=a.bannerStyle)==null?void 0:k.textColor)||"#000",textAlign:((J=a.bannerStyle)==null?void 0:J.textAlign)||"center",fontSize:((z=a.bannerStyle)==null?void 0:z.fontSize)||"1.5rem",fontWeight:"bold"},children:a.content})]})});default:return null}},u={backgroundColor:(f==null?void 0:f.backgroundColor)||I,color:(f==null?void 0:f.textColor)||"#ffffff",fontSize:(f==null?void 0:f.fontSize)||"1.125rem",borderRadius:(f==null?void 0:f.borderRadius)||"0.75rem"},l=t||m,G=(h??60)/100;return e.jsxs("div",{className:`relative w-full min-h-screen flex flex-col overflow-x-hidden ${l||c?"bg-gray-900":"bg-gray-50"}`,style:{backgroundColor:t||void 0,backgroundImage:m?`url(${m})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[l&&(!p||!s)&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:G}}),!l&&c&&(!p||!s)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:c.type==="image"||c.type==="banner"?c.content:c.type==="youtube"?`https://img.youtube.com/vi/${c.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:j=>{j.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsx("div",{className:`flex-1 flex flex-col items-center justify-center p-4 pb-28 relative z-10 ${p&&s?"!p-0":""}`,children:e.jsxs("div",{className:`w-full ${P?`max-w-${P}`:"max-w-screen-md"} space-y-8 ${p&&s?"!w-full":""}`,children:[$(),w.length>0&&e.jsx("div",{className:`p-6 rounded-2xl border mb-8 ${p&&s?"mx-4":""} ${l||c?"bg-white/5 border-white/10 backdrop-blur-md":"bg-gray-50 border-gray-100"}`,children:e.jsx(ie,{fields:w,formData:M,onChange:b,errors:Q,formStyle:v,primaryColor:I})})]})}),e.jsx("div",{className:`fixed bottom-0 left-0 right-0 p-4 z-50 safe-area-bottom ${l||c?"bg-gradient-to-t from-black/80 to-transparent":"bg-white border-t"}`,children:e.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[i!==!1&&o&&e.jsx("button",{onClick:o,className:`px-6 py-4 rounded-xl font-bold transition-all ${l||c?"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:O||"이전"}),e.jsx("button",{onClick:H,style:u,className:`flex-1 py-4 font-bold shadow-lg transform active:scale-95 transition-all ${f!=null&&f.animation?`animate-btn-${f.animation}`:""}`,children:L||"다음으로"})]})})]})},$e=({step:a,onPrev:W,onSubmit:L,primaryColor:o="#3b82f6",backgroundContent:i,insertedContent:O,backgroundColor:f,backgroundImage:I,backgroundOverlay:c,maxWidth:t,titleStyle:m,subtitleStyle:h,formData:P={},onDataChange:R=()=>{},embeddedFields:U=[],formStyle:M,mediaStyles:b,hideMobileBackground:w=!1,hideTitle:v=!1})=>{var A,Z,g,x,E,F,q,C,y,S,ce,oe,le,ne,de,te,he,xe,me,ge,pe,ue;const[d,s]=T.useState({privacy:!1,terms:!1,marketing:!1,thirdParty:!1}),[Q,K]=T.useState({}),[p,_]=T.useState(""),[r,H]=T.useState(!1),[$,u]=T.useState(!1);ae.useEffect(()=>{const N=()=>u(window.innerWidth<768);return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const l=()=>{const N={};return U.forEach(X=>{X.required&&!P[X.id]&&(N[X.id]="필수 항목을 입력해주세요.")}),K(N),Object.keys(N).length===0},G=async()=>{var N,X;if(_(""),!!l()){if((N=a.policyConfig)!=null&&N.showPrivacy&&!d.privacy){_("개인정보 수집 및 이용에 동의해주세요.");return}if((X=a.policyConfig)!=null&&X.showTerms&&!d.terms){_("이용약관에 동의해주세요.");return}H(!0);try{await L(P)}finally{H(!1)}}},j=N=>{s(X=>({...X,[N]:!X[N]})),p&&_("")},D=()=>{const N=!Object.values(d).every(X=>X);s({privacy:N,terms:N,marketing:N,thirdParty:N}),p&&_("")},n=a.buttonStyle||{},B={backgroundColor:n.backgroundColor||o,color:n.textColor||"#ffffff",fontSize:n.fontSize||"1.125rem",borderRadius:n.borderRadius||"0.75rem"},Y=a.policyConfig&&Object.values(a.policyConfig).some(N=>N),k=f||I,J=(c??60)/100,z={backgroundColor:(A=a.policyStyle)!=null&&A.hideBackground?"transparent":((Z=a.policyStyle)==null?void 0:Z.backgroundColor)||(k||i?"rgba(255, 255, 255, 0.05)":"#f9fafb"),borderColor:(g=a.policyStyle)!=null&&g.hideBackground?"transparent":((x=a.policyStyle)==null?void 0:x.borderColor)||(k||i?"rgba(255, 255, 255, 0.1)":"#f3f4f6"),borderRadius:((E=a.policyStyle)==null?void 0:E.borderRadius)||"1rem",padding:$&&((F=a.policyStyle)!=null&&F.mobilePadding)?a.policyStyle.mobilePadding:((q=a.policyStyle)==null?void 0:q.padding)||"1.5rem",maxHeight:((C=a.policyStyle)==null?void 0:C.containerMaxHeight)||"none",overflowY:(y=a.policyStyle)!=null&&y.containerMaxHeight?"auto":"visible"};return e.jsxs("div",{className:`flex flex-col flex-1 min-h-screen relative overflow-hidden ${k||i?"bg-gray-900 text-white":"bg-white text-gray-900"}`,style:{backgroundColor:f||void 0,backgroundImage:I?`url(${I})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[k&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",style:{opacity:J}}),!k&&i&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:i.type==="image"||i.type==="banner"?i.content:i.type==="youtube"?`https://img.youtube.com/vi/${i.content}/maxresdefault.jpg`:"",alt:"Background",className:"w-full h-full object-cover opacity-60",onError:N=>{N.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:`flex-1 w-full ${t?`max-w-${t}`:"max-w-md"} mx-auto px-6 py-20 flex flex-col justify-center relative z-10 ${$&&w?"!p-0 !w-full !max-w-none":""}`,children:[!v&&a.title&&e.jsx("h2",{className:`text-2xl font-bold mb-8 text-center ${$&&w?"mt-20 px-6":""}`,style:m,children:a.title}),O&&e.jsx("div",{className:`w-full mb-8 rounded-xl overflow-hidden shadow-lg relative ${$&&w?"":"bg-black/20 border border-white/10"}`,children:e.jsx("div",{className:"mx-auto overflow-y-auto",style:{width:$?w?"100vw":(b==null?void 0:b.mobileWidth)||"100%":(b==null?void 0:b.pcWidth)||"100%",height:$?w?"auto":(b==null?void 0:b.mobileHeight)||"auto":(b==null?void 0:b.pcHeight)||"auto",maxHeight:$?w?"80vh":b!=null&&b.mobileHeight&&b.mobileHeight!=="auto"?"none":"400px":b!=null&&b.pcHeight&&b.pcHeight!=="auto"?"none":"400px"},children:O.type==="video"?e.jsx("video",{src:O.content,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):O.type==="youtube"?e.jsx("div",{className:"relative w-full pt-[56.25%]",children:e.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${O.content}?autoplay=0&controls=1&rel=0`,title:"YouTube video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):e.jsx("img",{src:O.content,alt:"Inserted Content",className:"w-full h-full object-contain"})})}),U.length>0&&e.jsx("div",{className:`p-6 rounded-2xl border mb-8 ${k||i?"bg-white/5 border-white/10 backdrop-blur-md":"bg-gray-50 border-gray-100"}`,children:e.jsx(ie,{fields:U,formData:P,onChange:R,errors:Q,formStyle:M,primaryColor:o})}),Y&&e.jsxs("div",{className:`mb-8 border shadow-sm ${k||i?"backdrop-blur-md":""}`,style:z,children:[e.jsxs("div",{className:`flex items-center justify-between mb-4 pb-4 border-b ${k||i?"border-white/10":"border-gray-200"}`,style:{fontSize:((S=a.policyStyle)==null?void 0:S.labelFontSize)||"1rem"},children:[e.jsx("span",{className:"font-bold",children:"약관 전체 동의"}),e.jsx("button",{onClick:D,className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${Object.values(d).every(N=>N)?"bg-blue-500 border-blue-500 text-white":"border-gray-300"}`,children:Object.values(d).every(N=>N)&&e.jsx(je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",style:{gap:((ce=a.policyStyle)==null?void 0:ce.itemGap)||"1rem"},children:[((oe=a.policyConfig)==null?void 0:oe.showPrivacy)&&e.jsx(ee,{label:"[필수] 개인정보 수집 및 이용 동의",checked:d.privacy,onChange:()=>j("privacy"),hideBg:k||i,fontSize:(le=a.policyStyle)==null?void 0:le.itemFontSize}),((ne=a.policyConfig)==null?void 0:ne.showTerms)&&e.jsx(ee,{label:"[필수] 이용약관 동의",checked:d.terms,onChange:()=>j("terms"),hideBg:k||i,fontSize:(de=a.policyStyle)==null?void 0:de.itemFontSize}),((te=a.policyConfig)==null?void 0:te.showMarketing)&&e.jsx(ee,{label:"[선택] 마케팅 정보 수신 동의",checked:d.marketing,onChange:()=>j("marketing"),hideBg:k||i,fontSize:(he=a.policyStyle)==null?void 0:he.itemFontSize}),((xe=a.policyConfig)==null?void 0:xe.showThirdParty)&&e.jsx(ee,{label:"[선택] 제3자 정보 제공 동의",checked:d.thirdParty,onChange:()=>j("thirdParty"),hideBg:k||i,fontSize:(me=a.policyStyle)==null?void 0:me.itemFontSize})]})]}),p&&e.jsx("p",{className:"text-red-500 text-center mb-4 text-sm font-medium animate-pulse",children:p})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 z-50 safe-area-bottom",children:e.jsxs("div",{className:`max-w-md mx-auto flex gap-3 ${((ge=a.buttonStyle)==null?void 0:ge.alignment)==="left"?"justify-start":((pe=a.buttonStyle)==null?void 0:pe.alignment)==="right"?"justify-end":"justify-center"}`,children:[a.showPrevButton!==!1&&W&&e.jsx("button",{onClick:W,className:`px-6 py-4 rounded-xl font-bold transition-all shrink-0 ${k||i?"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a.prevButtonText||"이전"}),e.jsx("button",{onClick:G,disabled:r,style:{...B,fontFamily:n.fontFamily,width:n.width==="full"?"100%":n.width==="xs"?"128px":n.width==="sm"?"192px":n.width==="md"?"256px":n.width==="lg"?"320px":n.width==="xl"?"384px":n.width==="auto"?"auto":void 0,flex:n.width==="full"||!n.width?"1":"none"},className:`py-4 font-bold shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2 ${(ue=a.buttonStyle)!=null&&ue.animation&&a.buttonStyle.animation!=="none"?`animate-btn-${a.buttonStyle.animation}`:""}`,children:r?"처리중...":a.buttonText||"신청완료"})]})}),e.jsx("div",{className:"h-24"})]})},ee=({label:a,checked:W,onChange:L,hideBg:o,fontSize:i})=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:L,children:[e.jsx("span",{className:`text-sm ${o?"text-gray-300":"text-gray-600"}`,style:{fontSize:i||"0.875rem"},children:a}),e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${W?"bg-blue-500 border-blue-500 text-white":o?"border-white/30":"border-gray-300"}`,children:W&&e.jsx(je,{className:"w-3 h-3"})})]}),we=({currentStep:a,totalSteps:W})=>{const L=Math.min(100,Math.round((a+1)/W*100));return e.jsx("div",{className:"w-full fixed top-0 left-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500",children:"진행률"}),e.jsxs("span",{className:"text-xs font-bold text-brand-600",children:[L,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx(V.div,{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600",initial:{width:0},animate:{width:`${L}%`},transition:{duration:.5,ease:"easeOut"}})})]})})},Te=({config:a,onSubmit:W})=>{var Q,K,p,_;const L=a.steps&&a.steps.length>0,[o,i]=T.useState("hero"),[O,f]=T.useState(0),[I,c]=T.useState(0),[t,m]=T.useState(0),[h,P]=T.useState({}),[R,U]=T.useState(!1),M=!a.id||a.id.startsWith("preview_"),b=()=>{i("form")},w=async r=>{const H={timestamp:new Date().toISOString(),landing_id:a.id,name:r.name||"Anonymous",phone:r.phone||"",user_agent:navigator.userAgent,referrer:document.referrer,...r};await W(H),i("success")},v=async(r={})=>{const H={...h,...r};if(P(H),a.steps&&t<a.steps.length-1)m($=>$+1),window.scrollTo(0,0);else{if(M){alert(`✅ 미리보기 모드

실제 배포 시 여기서 폼이 제출됩니다.
에디터로 돌아가서 계속 편집하세요.`);return}const $={timestamp:new Date().toISOString(),landing_id:a.id,name:H.name||"Anonymous",phone:H.phone||"",user_agent:navigator.userAgent,referrer:document.referrer,...H};await W($),U(!0)}},d=()=>{t>0&&(m(r=>r-1),window.scrollTo(0,0))},s=()=>e.jsxs(V.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"min-h-screen flex flex-col items-center justify-center p-6 text-center bg-white",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(V.div,{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1},children:e.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"제출이 완료되었습니다!"}),e.jsxs("p",{className:"text-gray-600 max-w-sm mb-8",children:["담당자가 내용을 확인 후 빠르게 연락드리겠습니다.",e.jsx("br",{}),"감사합니다."]}),e.jsx("button",{onClick:()=>{U(!1),m(0),P({}),window.scrollTo(0,0)},className:"text-sm text-gray-500 underline hover:text-gray-800 transition-colors",children:"다시 입력 하기"})]},"success");if(o==="success"||R)return e.jsx("div",{className:"min-h-screen bg-white font-sans",children:s()});if(L&&a.steps){const r=a.steps[t],H=r.type==="intro",$=r.contentId?(Q=a.detailContent)==null?void 0:Q.find(z=>z.id===r.contentId):void 0,u=a.steps.find(z=>z.type==="intro"),l=u?{backgroundColor:u.backgroundColor,backgroundImage:u.backgroundImage,backgroundOverlay:u.backgroundOverlay,hideMobileBackground:u.hideMobileBackground}:void 0,G=u==null?void 0:u.titleStyle,j=u==null?void 0:u.subtitleStyle,D=u==null?void 0:u.buttonStyle,n=u!=null&&u.contentId?(K=a.detailContent)==null?void 0:K.find(z=>z.id===u.contentId):void 0,B=u==null?void 0:u.maxWidth,Y=(a.formConfig.fields||[]).filter(z=>(r.fieldIds||[]).includes(z.id)),k=(r.type==="intro"||r.type==="outro")&&r.insertedContentId?(p=a.detailContent)==null?void 0:p.find(z=>z.id===r.insertedContentId):void 0,J={formData:h,onDataChange:(z,A)=>P(Z=>({...Z,[z]:A})),formConfig:a.formConfig,primaryColor:a.theme.primaryColor,maxWidth:r.maxWidth||B,buttonStyle:r.buttonStyle||D,titleStyle:r.titleStyle||G,subtitleStyle:r.subtitleStyle||j,formStyle:r.formStyle,mediaStyles:r.mediaStyles};return e.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:[!H&&e.jsx(we,{currentStep:t,totalSteps:a.steps.length}),e.jsx(re,{mode:"wait",children:e.jsxs(V.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-screen",children:[r.type==="intro"&&e.jsx(fe,{...J,heroConfig:{...a.hero,headline:r.title||a.hero.headline,ctaText:r.buttonText||a.hero.ctaText,features:r.features||a.hero.features},onStart:()=>v(),backgroundContent:$,insertedContent:k,hideTitle:r.hideTitle,backgroundColor:r.backgroundColor,backgroundImage:r.backgroundImage,backgroundOverlay:r.backgroundOverlay,embeddedFields:Y,hideMobileBackground:r.hideMobileBackground,fieldOverrides:r.fieldOverrides,questionContainerStyle:r.questionContainerStyle}),r.type==="content"&&e.jsx(ke,{...J,content:((_=a.detailContent)==null?void 0:_.find(z=>z.id===r.contentId))||{id:"fallback",type:"image",content:""},onNext:()=>v(),nextButtonText:r.buttonText,onPrev:d,showPrevButton:r.showPrevButton,prevButtonText:r.prevButtonText,backgroundContent:n,backgroundColor:l==null?void 0:l.backgroundColor,backgroundImage:l==null?void 0:l.backgroundImage,backgroundOverlay:l==null?void 0:l.backgroundOverlay,embeddedFields:Y,hideMobileBackground:l==null?void 0:l.hideMobileBackground,fieldOverrides:r.fieldOverrides}),r.type==="form"&&e.jsx(be,{...J,formConfig:{...a.formConfig,title:r.title||a.formConfig.title,fields:Y},onSubmit:z=>v(z),onProgressUpdate:()=>{},finalButtonText:r.buttonText,onPrev:d,showPrevButton:r.showPrevButton,prevButtonText:r.prevButtonText,backgroundContent:n,backgroundColor:l==null?void 0:l.backgroundColor,backgroundImage:l==null?void 0:l.backgroundImage,backgroundOverlay:l==null?void 0:l.backgroundOverlay,hideMobileBackground:l==null?void 0:l.hideMobileBackground,fieldOverrides:r.fieldOverrides,topContent:r.topContent}),r.type==="outro"&&e.jsx($e,{...J,step:r,onPrev:d,onSubmit:v,backgroundContent:$||n,insertedContent:k,backgroundColor:r.backgroundColor||(l==null?void 0:l.backgroundColor),backgroundImage:r.backgroundImage||(l==null?void 0:l.backgroundImage),backgroundOverlay:r.backgroundOverlay??(l==null?void 0:l.backgroundOverlay),embeddedFields:Y,hideMobileBackground:r.hideMobileBackground??(l==null?void 0:l.hideMobileBackground),hideTitle:r.hideTitle,fieldOverrides:r.fieldOverrides})]},r.id)})]})}return e.jsx("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:e.jsxs(re,{mode:"wait",children:[o==="hero"&&e.jsx(V.div,{exit:{opacity:0,y:-50},transition:{duration:.5},children:e.jsx(fe,{heroConfig:a.hero,onStart:b,primaryColor:a.theme.primaryColor})},"hero"),o==="form"&&e.jsxs(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col",children:[e.jsx(we,{currentStep:O,totalSteps:I}),e.jsx(be,{formConfig:a.formConfig,onSubmit:w,onProgressUpdate:(r,H)=>{f(r),c(H)}})]},"form")]})})};export{Te as default};
