const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CxE7kXSB.js","assets/animation-BOIIKJnC.js","assets/vendor-B_BVtOF2.js","assets/index-_Mdt_6Dw.css"])))=>i.map(i=>d[i]);
import{c as j,C as M,D as S,A as T,L as O,_ as $,f as G,a as B,b as P}from"./index-CxE7kXSB.js";import{j as e}from"./animation-BOIIKJnC.js";import{r as i,R as C,L as p}from"./vendor-B_BVtOF2.js";import{d as F}from"./githubService-HJLBymT9.js";import{R}from"./refresh-cw-DOgRhh7E.js";import{G as _,P as H}from"./plus-BROVtbTr.js";import{T as J}from"./trash-2-CK3HFMid.js";import{E as q}from"./external-link-CbNSC4f2.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=j("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=j("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=j("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=j("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=j("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),K=({id:x,expectedTitle:d})=>{const[N,h]=i.useState("loading"),[w,b]=i.useState(""),y=async()=>{h("loading");try{const c=Date.now(),v=`/${x}/index.html?t=${c}`;console.log(`[Badge] Checking ${v}`);const k=await fetch(v,{method:"GET"});if(k.status===404){console.warn(`[Badge] ${x}: 404 Not Found`),h("pending"),b("404 Not Found (File not generated yet)");return}const m=await k.text();console.log(`[Badge] ${x} Content Preview:`,m.substring(0,200));const g=m.includes("<title>Landing Page Factory</title>"),u=m.includes(d),f=m.includes('property="og:title"');console.log(`[Badge] ${x} Analysis:`,{isGeneric:g,hasSpecificTitle:u,hasOgTag:f,expected:d}),u&&f?h("success"):g?(h("pending"),b("Generic Title Found (Serving App Shell)")):(h("pending"),b("Content Mismatch (Old version cached?)"))}catch(c){console.error(`[Badge] ${x} Error:`,c),h("error"),b(c.message)}};return i.useEffect(()=>{y()},[x,d]),N==="loading"?e.jsx("div",{className:"p-2",children:e.jsx(R,{className:"w-4 h-4 text-gray-400 animate-spin"})}):N==="success"?e.jsxs("div",{className:"flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded text-xs border border-green-200",title:"SNS 공유 미리보기가 준비되었습니다.",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsx("span",{children:"공유 준비완료"})]}):N==="pending"?e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 bg-gray-100 px-2 py-1 rounded text-xs border border-gray-200 cursor-pointer hover:bg-gray-200 transition-colors",title:`클릭하여 다시 확인
디버그 정보: ${w}
(서버 반영에 최대 15분 소요)`,onClick:y,children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{children:"배포 대기중"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-500 bg-red-50 px-2 py-1 rounded text-xs border border-red-200 cursor-pointer",title:`에러 발생: ${w}`,onClick:y,children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:"확인 불가"})]})},ne=()=>{const x=P,[d,N]=i.useState([]),[h,w]=i.useState([]),[b,y]=i.useState(!0),[c,v]=i.useState("newest"),k=t=>{if(!t)return 0;try{return new Date(t).getTime()}catch{return 0}},[m,g]=i.useState(1),u=10;i.useEffect(()=>{g(1)},[c]);const f=C.useMemo(()=>{const t=new Map;return h.forEach(r=>{const a=String(r["Landing ID"]||"unknown"),n=t.get(a)||{count:0,lastInfoTime:0};n.count++;const s=k(r.Timestamp);s>n.lastInfoTime&&(n.lastInfoTime=s),t.set(a,n)}),t},[h]),D=C.useMemo(()=>{let t=[...d];return t.sort((r,a)=>{const n=Number(r.id)||0,s=Number(a.id)||0,o=f.get(r.id)||{count:0,lastInfoTime:0},l=f.get(a.id)||{count:0,lastInfoTime:0};switch(c){case"oldest":return n-s;case"lead_count_desc":return l.count!==o.count?l.count-o.count:s-n;case"last_lead_desc":return l.lastInfoTime!==o.lastInfoTime?l.lastInfoTime-o.lastInfoTime:s-n;case"newest":default:return n!==0&&s!==0?s-n:String(a.id).localeCompare(String(r.id))}}),t},[d,c,f]);i.useEffect(()=>{g(1)},[c,d.length]);const L=D.slice((m-1)*u,m*u);i.useEffect(()=>{(async()=>{y(!0);try{const[r,a]=await Promise.all([G(),B()]),n=new Map;Object.values(x).forEach(s=>n.set(s.id,s)),Array.isArray(r)&&r.forEach(s=>n.set(s.id,s));try{const s=localStorage.getItem("landing_drafts");if(s){const o=JSON.parse(s);Object.values(o).forEach(l=>n.set(l.id,l))}}catch(s){console.error(s)}N(Array.from(n.values())),w(Array.isArray(a)?a:[])}catch(r){console.error("Dashboard Load Error:",r)}finally{y(!1)}})()},[]);const E=t=>{const r=localStorage.getItem("landing_drafts")&&JSON.parse(localStorage.getItem("landing_drafts")||"{}")[t],a=x[t];return r?e.jsxs("span",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded-full border border-orange-100 flex items-center",children:[e.jsx(I,{className:"w-3 h-3 mr-1"})," 작성 중 (Draft)"]}):a?e.jsxs("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full border border-gray-200 flex items-center",children:[e.jsx(S,{className:"w-3 h-3 mr-1"})," 기본 (System)"]}):e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full border border-blue-100 flex items-center",children:[e.jsx(_,{className:"w-3 h-3 mr-1"})," 배포됨 (Live)"]})},A=t=>{if(!confirm(`'${t.title}' 페이지를 복제하시겠습니까?

복제된 페이지는 '작성 중' 상태로 생성됩니다.`))return;const r=String(Date.now()),a=JSON.parse(JSON.stringify(t));a.id=r,a.title=`${t.title} (복제본)`,a.hero&&(a.hero.headline=`[복제] ${a.hero.headline}`);const n=localStorage.getItem("landing_drafts"),s=n?JSON.parse(n):{};s[r]=a,localStorage.setItem("landing_drafts",JSON.stringify(s)),alert(`페이지가 복제되었습니다.
목록 상단에 "작성 중" 상태로 추가됩니다.`),window.location.reload()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900 font-sans",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-4 md:py-5 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"p-1.5 md:p-2 bg-blue-600 rounded-lg",children:e.jsx(S,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsx("h1",{className:"text-base md:text-xl font-bold",children:"Landing Admin"})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3 items-center",children:[e.jsx(p,{to:"/",className:"hidden md:inline-block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium",children:"사이트 홈으로"}),e.jsx(p,{to:"/admin/settings",className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"설정",children:e.jsx(Z,{className:"w-5 h-5"})})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto p-4 md:p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs(p,{to:"/admin/stats",className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-blue-400 transition-colors flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-lg",children:e.jsx(S,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"DB 수집 내역"}),e.jsx("p",{className:"text-xs text-gray-500",children:"신청된 고객 정보 확인"})]})]}),e.jsxs(p,{to:"/admin/traffic-stats",className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-blue-400 transition-colors flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-lg",children:e.jsx(T,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"접속 통계"}),e.jsx("p",{className:"text-xs text-gray-500",children:"일별 방문자 및 전환율"})]})]}),e.jsxs(p,{to:"/admin/traffic-logs",className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:border-blue-400 transition-colors flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 text-orange-600 rounded-lg",children:e.jsx(_,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"유입 경로"}),e.jsx("p",{className:"text-xs text-gray-500",children:"상세 접속 로그 및 IP"})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-end gap-4 mb-6 border-b pb-4",children:[e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-2 md:mb-1",children:e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"보유 중인 랜딩페이지"})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4",children:[e.jsx("p",{className:"text-gray-500 text-sm hidden md:block",children:"Google Sheets와 연동된 모든 랜딩페이지 목록입니다."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-white md:bg-gray-100 md:px-3 py-1 rounded-lg self-start",children:[e.jsx("span",{className:"font-bold",children:"정렬:"}),e.jsxs("select",{value:c,onChange:t=>v(t.target.value),className:"bg-transparent border-none outline-none text-gray-800 font-medium cursor-pointer",children:[e.jsx("option",{value:"newest",children:"최신순 (Newest)"}),e.jsx("option",{value:"oldest",children:"오래된순 (Oldest)"}),e.jsx("option",{value:"lead_count_desc",children:"DB입력 많은 순"}),e.jsx("option",{value:"last_lead_desc",children:"최근 DB입력 순"})]})]})]})]}),e.jsxs(p,{to:"/admin/editor",className:"flex items-center justify-center w-full md:w-auto px-5 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors text-sm font-bold shadow-md",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"새 페이지 만들기"]})]}),b?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(O,{className:"w-8 h-8 text-blue-600 animate-spin"})}):e.jsxs("div",{className:"grid gap-6",children:[L.map(t=>{var a,n;const r=f.get(t.id);return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold",children:["/",t.id]}),E(t.id),e.jsx(K,{id:t.id,expectedTitle:t.title||((a=t.hero)==null?void 0:a.headline)||""}),r&&r.count>0&&e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-bold",children:["DB ",r.count,"건"]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:t.title||"(제목 없음)"}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:((n=t.hero)==null?void 0:n.headline)||"(헤드라인 없음)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 border-t md:border-t-0 pt-4 md:pt-0",children:[e.jsx("button",{onClick:async()=>{if(confirm(`정말 '${t.title}' 페이지를 삭제하시겠습니까?

삭제 후에는 복구할 수 없습니다.
(GitHub 배포 파일도 함께 삭제됩니다)`)){const s=await $(()=>import("./index-CxE7kXSB.js").then(l=>l.a0),__vite__mapDeps([0,1,2,3])).then(l=>l.deleteLandingConfig(t.id));let o="";if(s){o+=`DB(구글 시트)에서 삭제되었습니다.
`;try{const l=await F(t.id);l.success?o+="GitHub 배포 파일도 삭제되었습니다.":o+="GitHub 삭제 실패: "+l.message}catch{o+="GitHub 연결 오류 (삭제되지 않았을 수 있습니다)"}alert(o),window.location.reload()}else alert("삭제에 실패했습니다.")}},className:"flex items-center justify-center w-9 h-9 md:w-10 md:h-10 border border-red-200 bg-red-50 rounded-lg text-red-600 hover:bg-red-100 transition-colors",title:"페이지 삭제",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>A(t),className:"flex items-center justify-center w-9 h-9 md:w-auto md:px-4 md:py-2 border border-blue-200 bg-blue-50 rounded-lg text-sm font-medium text-blue-700 hover:bg-blue-100 transition-colors",title:"페이지 복제",children:[e.jsx(V,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"복제"})]}),e.jsxs("button",{onClick:()=>{const s=`${window.location.origin}/${t.id}`;navigator.clipboard.writeText(s),alert(`배포 주소가 복사되었습니다.
`+s)},className:"flex items-center justify-center w-9 h-9 md:w-auto md:px-4 md:py-2 border border-blue-200 bg-blue-50 rounded-lg text-sm font-medium text-blue-700 hover:bg-blue-100 transition-colors",title:"배포 링크 복사",children:[e.jsx(X,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"링크"})]}),e.jsxs(p,{to:`/${t.id}`,target:"_blank",className:"flex items-center justify-center w-9 h-9 md:w-auto md:px-4 md:py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",title:"미리보기",children:[e.jsx(q,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"미리보기"})]}),e.jsxs(p,{to:`/admin/editor/${t.id}`,className:"flex items-center justify-center px-3 py-2 md:px-4 bg-gray-900 text-white rounded-lg text-xs md:text-sm font-medium hover:bg-gray-800 transition-colors",children:[e.jsx(I,{className:"w-4 h-4 mr-1 md:mr-2"}),"수정"]})]})]},t.id)}),d.length===0&&e.jsx("div",{className:"text-center py-20 bg-gray-100 rounded-xl border-dashed border-2 border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"생성된 랜딩페이지가 없습니다."})})]}),!b&&d.length>0&&e.jsxs("div",{className:"mt-8 flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>g(t=>Math.max(1,t-1)),disabled:m===1,className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",children:"이전"}),Array.from({length:Math.ceil(d.length/u)},(t,r)=>r+1).map(t=>e.jsx("button",{onClick:()=>g(t),className:`px-3 py-1 rounded border ${m===t?"bg-blue-600 text-white border-blue-600":"bg-white border-gray-300 hover:bg-gray-50"}`,children:t},t)),e.jsx("button",{onClick:()=>g(t=>Math.min(Math.ceil(d.length/u),t+1)),disabled:m===Math.ceil(d.length/u),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",children:"다음"})]})]})]})};export{ne as default};
