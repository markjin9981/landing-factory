import{j as e}from"./animation-BOIIKJnC.js";import{r as p,L as B}from"./vendor-B_BVtOF2.js";import{c as P,K as U,z as I,a as V,X as z,J as W,b as O,f as X}from"./index-BIwBoAZ-.js";import{u as L,w as H}from"./xlsx-CKN5doRT.js";import{R as q,L as G,C as J,X as Q,Y as Z,T as ee,a as te,b as D}from"./charts-C-ooaHf9.js";import{S as se}from"./smartphone-D-iX6qhl.js";import{A as ae}from"./arrow-left-COElSkQ1.js";import{R as re}from"./refresh-cw-DpLvBBK-.js";import{F as le}from"./filter-C-RZMPle.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=P("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=P("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),oe=({visits:c,leads:u})=>{const x=t=>{if(!t||typeof t!="string")return 0;const r=new Date(t).getTime();if(!isNaN(r))return r;try{const s=t.includes("ì˜¤í›„")||t.toLowerCase().includes("pm"),l=t.includes("ì˜¤ì „")||t.toLowerCase().includes("am"),d=t.match(/\d+/g);if(!d||d.length<3)return 0;let b=parseInt(d[0],10),g=parseInt(d[1],10)-1,f=parseInt(d[2],10),o=0;return d.length>=4&&(o=parseInt(d[3],10)),s&&o<12&&(o+=12),l&&o===12&&(o=0),new Date(b,g,f,o).getTime()}catch{return 0}},y=t=>{const r=t.getHours();return r>=9&&r<=17?"day":"night"},a=p.useMemo(()=>{const t=new Map,r=()=>({total:0,pc:0,mobile:0});return c.forEach(s=>{const l=x(s.Timestamp);if(!l)return;const d=new Date(l),b=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,g=y(d),f=s.Device==="PC";t.has(b)||t.set(b,{date:b,visits:{day:r(),night:r(),sum:r()},leads:{day:r(),night:r(),sum:r()}});const o=t.get(b);o.visits[g].total++,f?o.visits[g].pc++:o.visits[g].mobile++,o.visits.sum.total++,f?o.visits.sum.pc++:o.visits.sum.mobile++}),u.forEach(s=>{const l=x(s.timestamp||s.Timestamp);if(!l)return;const d=new Date(l),b=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,g=y(d),f=s.user_agent?!/mobile/i.test(s.user_agent):!0;t.has(b)||t.set(b,{date:b,visits:{day:r(),night:r(),sum:r()},leads:{day:r(),night:r(),sum:r()}});const o=t.get(b);o.leads[g].total++,f?o.leads[g].pc++:o.leads[g].mobile++,o.leads.sum.total++,f?o.leads.sum.pc++:o.leads.sum.mobile++}),Array.from(t.values()).sort((s,l)=>l.date.localeCompare(s.date))},[c,u]),n=p.useMemo(()=>[...a].slice(0,10).reverse().map(t=>({date:t.date.slice(5).replace("-","."),visits:t.visits.sum.total,pc:t.visits.sum.pc,mobile:t.visits.sum.mobile,leads:t.leads.sum.total})),[a]),h=t=>e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"font-bold text-gray-800",children:t.total}),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",t.pc,"/",t.mobile,")"]})]}),j=()=>{const t=L.json_to_sheet(a.map(s=>({ë‚ ì§œ:s.date,ë°©ë¬¸_ì „ì²´:s.visits.sum.total,ë°©ë¬¸_PC:s.visits.sum.pc,ë°©ë¬¸_ëª¨ë°”ì¼:s.visits.sum.mobile,ë°©ë¬¸_ì£¼ê°„:s.visits.day.total,ë°©ë¬¸_ì•¼ê°„:s.visits.night.total,ì ‘ìˆ˜_ì „ì²´:s.leads.sum.total,ì ‘ìˆ˜_PC:s.leads.sum.pc,ì ‘ìˆ˜_ëª¨ë°”ì¼:s.leads.sum.mobile}))),r=L.book_new();L.book_append_sheet(r,t,"ì¼ë³„í†µê³„"),H(r,"landing_factory_daily_stats.xlsx")};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ì¼ë³„ í†µê³„"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ëžœë”©ì„ ì ‘ì†í•œ ê¸°ë¡ê³¼ ì‹ ì²­í•œ ë°ì´í„°ë¥¼ ë‚ ì§œë³„ë¡œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]}),e.jsx("div",{className:"text-sm font-bold text-gray-700",children:"ê²€ìƒ‰ì¼ ê¸°ì¤€ ìµœê·¼ 10ì¼ê°„ ê·¸ëž˜í”„"})]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(q,{width:"100%",height:"100%",children:e.jsxs(G,{data:n,children:[e.jsx(J,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(Q,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},dy:10}),e.jsx(Z,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),e.jsx(ee,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(te,{iconType:"circle"}),e.jsx(D,{type:"monotone",dataKey:"pc",name:"ìœ ìž…(PC)",stroke:"#22c55e",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(D,{type:"monotone",dataKey:"mobile",name:"ìœ ìž…(ëª¨ë°”ì¼)",stroke:"#ec4899",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(D,{type:"monotone",dataKey:"visits",name:"ìœ ìž…(ì „ì²´)",stroke:"#6366f1",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(D,{type:"monotone",dataKey:"leads",name:"ì ‘ìˆ˜(ì „ì²´)",stroke:"#3b82f6",strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-4 items-center",children:e.jsx("div",{className:"flex gap-2"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"ì£¼ì•¼ê¸°ì¤€ : ì£¼ê°„(09~17ì‹œ) ì™¸ ì•¼ê°„"}),e.jsxs("button",{onClick:j,className:"flex items-center px-3 py-1.5 bg-gray-900 text-white text-xs rounded hover:bg-gray-800 transition-colors",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-white border-b text-center text-xs text-gray-500",children:[e.jsx("th",{rowSpan:2,className:"px-4 py-3 font-medium bg-gray-50 w-32 border-r",children:"ë‚ ì§œ"}),e.jsx("th",{colSpan:3,className:"px-4 py-2 font-medium border-r border-b",children:"ìœ ìž… (PC/Mobile)"}),e.jsx("th",{colSpan:3,className:"px-4 py-2 font-medium border-b",children:"ì ‘ìˆ˜ (PC/Mobile)"}),e.jsx("th",{rowSpan:2,className:"px-4 py-3 font-medium bg-gray-50 border-l w-24",children:"ì ‘ìˆ˜ìœ¨"})]}),e.jsxs("tr",{className:"bg-gray-50 text-center text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì£¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì•¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32 bg-gray-100",children:"í•©ê³„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì£¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32",children:"ì•¼ê°„"}),e.jsx("th",{className:"px-4 py-2 font-normal w-32 bg-gray-100",children:"í•©ê³„"})]})]}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-400",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})}):a.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-center font-medium text-gray-800 bg-gray-50 border-r text-xs",children:t.date}),e.jsx("td",{className:"px-4 py-3 border-r",children:h(t.visits.day)}),e.jsx("td",{className:"px-4 py-3 border-r",children:h(t.visits.night)}),e.jsx("td",{className:"px-4 py-3 border-r bg-gray-50/50",children:h(t.visits.sum)}),e.jsx("td",{className:"px-4 py-3 border-r",children:h(t.leads.day)}),e.jsx("td",{className:"px-4 py-3 border-r",children:h(t.leads.night)}),e.jsx("td",{className:"px-4 py-3 bg-gray-50/50",children:h(t.leads.sum)}),e.jsx("td",{className:"px-4 py-3 text-center border-l font-bold text-blue-600 bg-gray-50",children:t.visits.sum.total>0?(t.leads.sum.total/t.visits.sum.total*100).toFixed(1)+"%":"0%"})]},t.date))})]})})]})]})},de=({visits:c,leads:u})=>{const x=c.length,y=u.length,a=x>0?(y/x*100).toFixed(1):"0",n=(r,s)=>s>0?(r/s*100).toFixed(0)+"%":"0%",h=p.useMemo(()=>{const r=c.filter(l=>l.Device==="PC").length,s=c.filter(l=>l.Device!=="PC").length;return[{label:"PC",count:r,percent:n(r,x)},{label:"ëª¨ë°”ì¼",count:s,percent:n(s,x)}]},[c]),j=p.useMemo(()=>{const r=[0,0,0,0,0,0,0];c.forEach(d=>{const b=new Date(d.Timestamp);isNaN(b.getTime())||r[b.getDay()]++});const s=["ì¼ìš”ì¼","ì›”ìš”ì¼","í™”ìš”ì¼","ìˆ˜ìš”ì¼","ëª©ìš”ì¼","ê¸ˆìš”ì¼","í† ìš”ì¼"];return[1,2,3,4,5,6,0].map(d=>({label:s[d],count:r[d],percent:n(r[d],x)}))},[c]),t=p.useMemo(()=>{const r=new Array(24).fill(0);return c.forEach(s=>{const l=new Date(s.Timestamp);isNaN(l.getTime())||r[l.getHours()]++}),r.map((s,l)=>({label:`${l}ì‹œ`,count:s,percent:n(s,x)}))},[c]);return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ìƒì„¸ í˜„í™©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ëžœë”© ìœ ìž…ê³¼ ì ‘ìˆ˜ í˜„í™©ì„ í•­ëª©ë³„ë¡œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 bg-white p-6 rounded-xl border border-gray-200 shadow-sm text-center",children:[e.jsx(S,{label:"ìœ ìž…ìˆ˜",value:`${x}ê±´`,color:"text-gray-900"}),e.jsx(S,{label:"í‰ê·  ì²´ë¥˜ ì‹œê°„",value:"-",color:"text-gray-400",sub:"(ì§‘ê³„ì¤‘)"}),e.jsx(S,{label:"ì²´ë¥˜ ì‹œê°„ì´ ì—†ëŠ” ìœ ìž…",value:"-",color:"text-gray-400",sub:"(0%)"}),e.jsx(S,{label:"ì ‘ìˆ˜",value:`${y}ê±´`,color:"text-blue-600"}),e.jsx(S,{label:"ì ‘ìˆ˜ìœ¨",value:`${a}%`,color:"text-blue-600"}),e.jsx(S,{label:"í‰ê·  ì ‘ìˆ˜ ì‹œê°„",value:"-",color:"text-gray-400",sub:"(ì§‘ê³„ì¤‘)"})]}),e.jsxs("h4",{className:"text-lg font-bold flex items-center gap-2 mt-8 mb-4",children:[e.jsx(ne,{className:"w-5 h-5"})," í•­ëª©ë³„ ì§‘ê³„ í˜„í™©"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx($,{title:"ìœ ìž…ê¸°ê¸°ë³„",icon:e.jsx(se,{className:"w-4 h-4"}),headers:["í•­ëª©","ìœ ìž…","ë¹„ìœ¨"],rows:h}),e.jsx($,{title:"ìš”ì¼ë³„",icon:e.jsx(I,{className:"w-4 h-4"}),headers:["í•­ëª©","ìœ ìž…","ë¹„ìœ¨"],rows:j}),e.jsx($,{title:"ì‹œê°„ëŒ€ë³„",icon:e.jsx(V,{className:"w-4 h-4"}),headers:["í•­ëª©","ìœ ìž…","ë¹„ìœ¨"],rows:t})]})]})},S=({label:c,value:u,color:x,sub:y})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-2 border-r last:border-r-0 border-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 mb-2",children:c}),e.jsx("span",{className:`text-2xl font-bold ${x}`,children:u}),y&&e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:y})]}),$=({title:c,icon:u,headers:x,rows:y})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 bg-gray-50 flex items-center gap-2 font-bold text-sm text-gray-700",children:[u," ",c]}),e.jsx("div",{className:"overflow-x-auto max-h-[300px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-xs text-center",children:[e.jsx("thead",{className:"text-gray-500 bg-gray-50 border-b",children:e.jsx("tr",{children:x.map(a=>e.jsx("th",{className:"py-2",children:a},a))})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:y.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 text-gray-600",children:a.label}),e.jsxs("td",{className:"py-2 text-gray-800 font-medium",children:[a.count,"ê±´"]}),e.jsx("td",{className:"py-2 text-gray-500",children:a.percent})]},a.label))})]})})]}),ce=({visits:c,leads:u})=>{const x=p.useMemo(()=>{const a={};return c.forEach(n=>{const h=n.utm_source||"(direct)",j=n.utm_medium||"-",t=n.utm_campaign||"-",r=n.utm_term||"-",s=n.utm_content||"-",l=`${h}|${j}|${t}|${r}|${s}`;a[l]||(a[l]={id:l,source:h,medium:j,campaign:t,term:r,content:s,visits:0,leads:0}),a[l].visits++}),u.forEach(n=>{const h=n.utm_source||"(direct)",j=n.utm_medium||"-",t=n.utm_campaign||"-",r=n.utm_term||"-",s=n.utm_content||"-",l=`${h}|${j}|${t}|${r}|${s}`;a[l]||(a[l]={id:l,source:h,medium:j,campaign:t,term:r,content:s,visits:0,leads:0}),a[l].leads++}),Object.values(a).sort((n,h)=>h.leads-n.leads||h.visits-n.visits)},[c,u]),y=c.length;return u.length,e.jsxs("div",{className:"animate-fade-in space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-gray-500 text-xs font-bold mb-1",children:"UTM ì¶”ì  ë°©ë¬¸"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[x.reduce((a,n)=>n.source!=="(direct)"?a+n.visits:a,0).toLocaleString(),e.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["/ ",y.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-gray-500 text-xs font-bold mb-1",children:"ë§ˆì¼€íŒ… ì „í™˜ (Leads)"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.reduce((a,n)=>n.source!=="(direct)"?a+n.leads:a,0).toLocaleString(),e.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"ê±´"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-gray-500"}),"ìº íŽ˜ì¸ ìƒì„¸ ë¶„ì„"]}),e.jsx("div",{className:"text-xs text-gray-400",children:"ì „í™˜ìˆ˜(DB) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Source (ì¶œì²˜)"}),e.jsx("th",{className:"px-6 py-3",children:"Medium (ë§¤ì²´)"}),e.jsx("th",{className:"px-6 py-3",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-right text-gray-400",children:"ë°©ë¬¸ìˆ˜"}),e.jsx("th",{className:"px-6 py-3 text-right font-bold text-blue-600",children:"ì „í™˜ìˆ˜(DB)"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"ì „í™˜ìœ¨"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. (ê¸°ê°„ì„ ì¡°ì •í•˜ê±°ë‚˜ UTM ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”)"})}):x.map((a,n)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-3 font-medium text-gray-900",children:a.source==="(direct)"?e.jsx("span",{className:"text-gray-400 font-normal italic",children:"(ì§ì ‘ ìœ ìž…)"}):e.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded text-xs border border-blue-100",children:a.source})}),e.jsx("td",{className:"px-6 py-3 text-gray-600",children:a.medium}),e.jsxs("td",{className:"px-6 py-3 text-gray-600",children:[a.campaign!=="-"&&e.jsx("div",{className:"font-medium",children:a.campaign}),a.term!=="-"&&e.jsxs("div",{className:"text-xs text-gray-400",children:["Term: ",a.term]})]}),e.jsx("td",{className:"px-6 py-3 text-right",children:a.visits.toLocaleString()}),e.jsx("td",{className:"px-6 py-3 text-right font-bold text-blue-600",children:a.leads.toLocaleString()}),e.jsxs("td",{className:"px-6 py-3 text-right text-gray-600",children:[a.visits>0?(a.leads/a.visits*100).toFixed(1):"0","%"]})]},n))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 text-xs text-blue-700",children:[e.jsx("strong",{children:"ðŸ’¡ íŒ:"})," UTM íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ëœ ë§í¬ë¡œ ìœ ìž…ëœ ê²½ìš°ì—ë§Œ ì´ê³³ì— ì§‘ê³„ë©ë‹ˆë‹¤. (ì˜ˆ: ",e.jsx("code",{className:"bg-white px-1 py-0.5 rounded border",children:"?utm_source=instagram&utm_medium=sns"}),")"]})]})},fe=()=>{const[c,u]=p.useState([]),[x,y]=p.useState([]),[a,n]=p.useState([]),[h,j]=p.useState(!0),[t,r]=p.useState("all"),[s,l]=p.useState(null),[d,b]=p.useState(!1),[g,f]=p.useState(new Date),[o,C]=p.useState("daily"),M=async()=>{j(!0);try{const[i,m,N]=await Promise.all([W(),O(),X()]);u(i||[]),y(m||[]),n(N||[])}catch(i){console.error(i)}finally{j(!1)}};p.useEffect(()=>{M()},[]);const F=i=>{const m=a.find(N=>String(N.id)===String(i));return m?m.title:`(ID: ${i})`},E=p.useMemo(()=>{const i=new Set(c.map(m=>m["Landing ID"]));return Array.from(i).sort().map(m=>({id:String(m),title:F(String(m))}))},[c,a]),w=p.useMemo(()=>{let i=c,m=x;return t!=="all"&&(i=i.filter(N=>String(N["Landing ID"])===t),m=m.filter(N=>String(N["Landing ID"])===t)),{visits:i,leads:m}},[c,x,t,s]),A=(i,m)=>new Date(i,m+1,0).getDate(),K=(i,m)=>new Date(i,m,1).getDay(),Y=()=>{const i=g.getFullYear(),m=g.getMonth(),N=A(i,m),R=K(i,m),k=[];for(let v=0;v<R;v++)k.push(e.jsx("div",{className:"h-8 w-8"},`empty-${v}`));for(let v=1;v<=N;v++){const _=`${i}-${String(m+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,T=s===_;k.push(e.jsx("button",{onClick:()=>{l(T?null:_),b(!1)},className:`h-8 w-8 rounded-full text-xs font-bold flex items-center justify-center relative ${T?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:v},v))}return k};return e.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-4 md:py-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(B,{to:"/admin",className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(ae,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("h1",{className:"text-base md:text-xl font-bold truncate max-w-[180px] md:max-w-none",children:["ì ‘ì† í†µê³„ ",s&&e.jsxs("span",{className:"text-blue-600 hidden md:inline",children:["(",s,")"]})]})]}),e.jsxs("button",{onClick:M,className:"flex items-center px-3 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 text-xs md:text-sm font-bold",children:[e.jsx(re,{className:`w-4 h-4 mr-1 md:mr-2 ${h?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"ìƒˆë¡œê³ ì¹¨"})]})]}),e.jsxs("main",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 md:p-4 mb-4 md:mb-6 shadow-sm relative",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap md:items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs md:text-sm font-bold text-gray-700",children:"í•„í„°:"})]}),e.jsxs("select",{value:t,onChange:i=>r(i.target.value),className:"w-full md:w-auto border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsx("option",{value:"all",children:"ì „ì²´ ëžœë”©íŽ˜ì´ì§€"}),E.map(i=>e.jsxs("option",{value:i.id,children:[i.title," (",i.id,")"]},i.id))]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>b(!d),className:`w-full md:w-auto flex items-center justify-center gap-2 px-3 py-2 border rounded-lg text-sm ${s?"bg-blue-50 border-blue-200 text-blue-700 font-bold":"border-gray-300 text-gray-700"}`,children:[e.jsx(I,{className:"w-4 h-4"}),s||"ë‚ ì§œ ì„ íƒ",s&&e.jsx(z,{className:"w-3 h-3 hover:text-red-500",onClick:i=>{i.stopPropagation(),l(null)}})]}),d&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl p-4 z-50 w-64",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>f(new Date(g.getFullYear(),g.getMonth()-1,1)),className:"p-1 hover:bg-gray-100 rounded",children:"<"}),e.jsxs("span",{className:"text-sm font-bold",children:[g.getFullYear(),"ë…„ ",g.getMonth()+1,"ì›”"]}),e.jsx("button",{onClick:()=>f(new Date(g.getFullYear(),g.getMonth()+1,1)),className:"p-1 hover:bg-gray-100 rounded",children:">"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Y()})]})]})]})}),e.jsxs("div",{className:"flex gap-4 md:gap-8 border-b border-gray-200 mb-6 md:mb-8 px-1 md:px-2 overflow-x-auto",children:[e.jsx("button",{onClick:()=>C("daily"),className:`pb-3 text-xs md:text-sm font-bold transition-colors border-b-2 whitespace-nowrap ${o==="daily"?"text-blue-600 border-blue-600":"text-gray-400 border-transparent hover:text-gray-700"}`,children:"ì¼ë³„ í˜„í™©"}),e.jsx("button",{onClick:()=>C("detail"),className:`pb-3 text-xs md:text-sm font-bold transition-colors border-b-2 whitespace-nowrap ${o==="detail"?"text-blue-600 border-blue-600":"text-gray-400 border-transparent hover:text-gray-700"}`,children:"ìƒì„¸ í˜„í™©"}),e.jsx("button",{onClick:()=>C("marketing"),className:`pb-3 text-xs md:text-sm font-bold transition-colors border-b-2 whitespace-nowrap ${o==="marketing"?"text-blue-600 border-blue-600":"text-gray-400 border-transparent hover:text-gray-700"}`,children:"ë§ˆì¼€íŒ… (UTM)"})]}),e.jsxs("div",{className:"min-h-[500px]",children:[o==="daily"&&e.jsx(oe,{visits:w.visits,leads:w.leads}),o==="detail"&&e.jsx(de,{visits:w.visits,leads:w.leads}),o==="marketing"&&e.jsx(ce,{visits:w.visits,leads:w.leads})]})]})]})};export{fe as default};
